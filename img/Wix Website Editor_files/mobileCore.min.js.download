define(["lodash","coreUtilsLib"],(function(n,e){return function(n){var e={};function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)t.d(o,r,function(e){return n[e]}.bind(null,r));return o},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=7)}([function(e,t){e.exports=n},function(n,e,t){"use strict";t.r(e),t.d(e,"isMergeVirtualGroup",(function(){return c})),t.d(e,"isRescaleVirtualGroup",(function(){return s})),t.d(e,"isVirtualGroup",(function(){return l})),t.d(e,"isDesktopOnlyComponent",(function(){return f})),t.d(e,"isTextComponent",(function(){return d})),t.d(e,"isVerticalText",(function(){return m})),t.d(e,"isGraphicComponent",(function(){return p})),t.d(e,"isGroupComponent",(function(){return v})),t.d(e,"isAppWidgetComponent",(function(){return y})),t.d(e,"isColumnsContainerComponent",(function(){return h})),t.d(e,"isImageComponent",(function(){return g})),t.d(e,"isMasterPage",(function(){return C})),t.d(e,"isMasterPageChild",(function(){return b})),t.d(e,"isDockingAllowed",(function(){return D})),t.d(e,"isFixedPositionAllowed",(function(){return T})),t.d(e,"isFixedPositionElement",(function(){return O})),t.d(e,"shouldConvertFixedPositionToAbsolute",(function(){return M})),t.d(e,"isExistsBeforeMerge",(function(){return E})),t.d(e,"shouldStretchToScreenWidth",(function(){return S})),t.d(e,"extractComponentsFromStructureByType",(function(){return x})),t.d(e,"isScreenWidthComponent",(function(){return w})),t.d(e,"translateComps",(function(){return P})),t.d(e,"reparentComponent",(function(){return I})),t.d(e,"addComponentsTo",(function(){return N})),t.d(e,"removeChildrenFrom",(function(){return _})),t.d(e,"removeGroup",(function(){return A})),t.d(e,"containsComponent",(function(){return k})),t.d(e,"getHeightAccordingToChildren",(function(){return R})),t.d(e,"ensureContainerTightlyWrapsChildren",(function(){return B})),t.d(e,"isSiteSegmentOrPage",(function(){return F})),t.d(e,"isPageComponent",(function(){return L})),t.d(e,"isMobileOnlyElement",(function(){return G})),t.d(e,"isModifiedComponent",(function(){return j})),t.d(e,"isNewlyComponent",(function(){return H})),t.d(e,"isDirectParentOfMOC",(function(){return z})),t.d(e,"componentListToMap",(function(){return W})),t.d(e,"isImplicityModified",(function(){return U})),t.d(e,"shouldKeepOnMobile",(function(){return Y})),t.d(e,"isContainerComponent",(function(){return X})),t.d(e,"isSiteSegment",(function(){return V})),t.d(e,"isAllowedToBeInMasterPage",(function(){return q})),t.d(e,"extractMobilePage",(function(){return K})),t.d(e,"getComponentByIdFromStructure",(function(){return Q})),t.d(e,"unifyGroups",(function(){return Z})),t.d(e,"getComponentsByIds",(function(){return J})),t.d(e,"getParent",(function(){return $})),t.d(e,"getParentIdFromMobileHints",(function(){return nn})),t.d(e,"setParentIdToMobileHints",(function(){return en})),t.d(e,"getSnugLayout",(function(){return tn})),t.d(e,"getTinyMenuDefaultPosition",(function(){return on})),t.d(e,"getChildren",(function(){return rn})),t.d(e,"getRootChild",(function(){return an})),t.d(e,"getRangesOverlap",(function(){return un})),t.d(e,"getYOverlap",(function(){return cn})),t.d(e,"getXOverlap",(function(){return sn})),t.d(e,"hasGreaterArea",(function(){return fn})),t.d(e,"haveSufficientOverlap",(function(){return dn})),t.d(e,"isEmptyContainer",(function(){return mn})),t.d(e,"shouldReparentCompToChildOfContainer",(function(){return pn})),t.d(e,"getFlattenListOfComponents",(function(){return vn})),t.d(e,"getAllCompsInStructure",(function(){return yn})),t.d(e,"isSemiTransparentContainer",(function(){return hn}));var o=t(0),r=t(2),i=t(4),a=t(5),u=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=function(n){return o.get(n,"componentType")===r.a.VIRTUAL_GROUP_TYPES.MERGE},s=function(n){return o.get(n,"componentType")===r.a.VIRTUAL_GROUP_TYPES.RESCALE},l=function(n){return s(n)||c(n)};function f(n){return o.get(n,["conversionData","desktopOnly"],!1)}function d(n){return"text"===o.get(n,["conversionData","category"])}function m(n){return o.get(n,["conversionData","isVerticalText"],!1)}function p(n){return"graphic"===o.get(n,["conversionData","category"])||g(n)}function v(n){return n&&"wysiwyg.viewer.components.Group"===n.componentType}function y(n){return n&&"platform.components.AppWidget"===n.componentType}function h(n){return"columns"===o.get(n,["conversionData","category"])}function g(n){return"photo"===o.get(n,["conversionData","category"])}function C(n){return"masterPage"===o.get(n,"id")}function b(n){return o.includes(["SITE_FOOTER","SITE_HEADER","SITE_PAGES","PAGES_CONTAINER"],n.id)}function D(n){return o.get(n,["conversionData","isDockingAllowed"])}function T(n){return o.get(n,["conversionData","isFixedPositionAllowed"])}function O(n){return o.get(n,["layout","fixedPosition"],!1)}function M(n){return o.get(n,["conversionData","convertFixedPositionToAbsolute"],!1)}function E(n){return!!n.conversionData&&n.conversionData.existsBeforeMerge}function S(n){var e=function(n){return o.get(n.conversionData,"isScreenWidth",!1)||o.get(n.conversionData,"stretchHorizontally",!1)||o.some(n.components,e)};return F(n)||e(n)}function x(n,e){var t=rn(n),r=o.remove(t,(function(n){var t=y(n)&&an(n);return o.includes(e,n.componentType)||t&&o.includes(e,t.componentType)}));return o.concat(r,o.flatMap(t,(function(n){return x(n,e)})))}function w(n){return o.get(n.conversionData,"isScreenWidth",!1)||o.some(n.components,w)}function P(n,e,t){void 0===e&&(e=0),void 0===t&&(t=0),o.forEach(n,(function(n){n.layout.x+=e,n.layout.y+=t}))}function I(n,e,t){N(n,[e],t),P([e],-n.layout.x,-n.layout.y)}function N(n,e,t){var o=rn(n);e.length&&o&&(t=void 0!==t?t:o.length,o.splice.apply(o,[t,0].concat(e)))}function _(n,e){var t=rn(n);o.remove(t,(function(n){return o.includes(e,n)}))}function A(n,e){if(v(n)){var t=o.findIndex(e.components,{id:n.id});o.forEach(n.components.reverse(),(function(o){N(e,[o],t),P([o],n.layout.x,n.layout.y)})),o.remove(e.components,n)}}function k(n,e){return o.some(rn(n),(function(n){return e(n)||n&&k(n,e)}))}function R(n,e,t){if(!j(n)&&!C(n)&&e&&(t||!o.isEmpty(e))){var i=o(e).reject(["conversionData.isInvisible",!0]).reduce((function(n,e){return o.max([n,e.layout.y+e.layout.height,0])}),0);return o.get(n,["conversionData","hasTightYMargin"])||o.get(n,["conversionData","hasTightBottomMargin"])?i:i+(S(n)?r.a.SECTION_MOBILE_MARGIN_Y:r.a.COMPONENT_MOBILE_MARGIN_Y+o.get(n.conversionData,"borderWidth",0))}}function B(n,e,t,r){void 0===r&&(r=0);var i=R(n,e,t);if(o.isNumber(i)){var a=o.get(n,["conversionData","minHeight"],r);n.layout.height=Math.max(a,i)}}function F(n){return L(n)||V(n)}function L(n){return"Page"===n.type}function G(n){return o.get(n,["conversionData","mobileHints","mobileOnlyElement"])}function j(n){return o.get(n,["conversionData","mobileHints","modifiedByUser"],!1)}var H=function(n){return o.get(n,["conversionData","existsOnMobileBeforeMerge",!1])},z=function(n){return o.get(n,["conversionData","isDirectParentOfMobileOnly"],!1)},W=function(n){return n.reduce((function(n,e){return n.set(e.id,e)&&n}),new Map)},U=function(n,e){return e.has(n.id)},Y=function(n,e){return j(n)||U(n,e)||Object(a.a)(n)||z(n)};function X(n){return"Container"===n.type}function V(n){return o.has(n.conversionData,"siteSegmentRole")}function q(n){return V(n)||o.has(n.conversionData,"isAllowedToBeChildOfMasterPage")}function K(n){var e=i.objectUtils.cloneDeep(n),t=o.has(e,"components")?"components":"children";return o.set(e,t,n.mobileComponents||[])}function Q(n,e){if(e.id===n)return e;var t=null;return o.find(rn(e),(function(e){return t=Q(n,e)})),t}function Z(n,e){if(n.length>e)n.length=0;else for(var t=function(e){var t=o.findLastIndex(n,(function(t,r){return r<e&&(i=n[e],a=t,o.size(o.intersection(i,a))>0);var i,a}));-1!==t&&(n[t]=n[t].concat(o.difference(n[e],n[t])),n.splice(e,1))},r=n.length-1;r>=0;r--)t(r)}function J(n,e){var t=rn(n);return o.map(e,(function(n){return o.find(t,{id:n})||null}))}function $(n,e){var t=rn(e);if(o.find(t,{id:n}))return e;var r=null;return o.find(t,(function(e){return r=$(n,e)})),r}var nn=function(n){var e,t;return null===(t=null===(e=n.conversionData)||void 0===e?void 0:e.mobileHints)||void 0===t?void 0:t.parent},en=function(n,e){return o.set(n,["conversionData","mobileHints","parent"],e)};function tn(n){if(n&&0!==n.length){var e=o.min(o.map(n,"layout.x")),t=o.min(o.map(n,"layout.y"));return{x:e,y:t,width:o.max(o.map(n,(function(n){return n.layout.x+n.layout.width})))-e,height:o.max(o.map(n,(function(n){return n.layout.y+n.layout.height})))-t,rotationInDegrees:0}}}function on(){return{x:r.a.MOBILE_WIDTH-(r.a.TINY_MENU_SIZE+r.a.SITE_SEGMENT_PADDING_X),y:r.a.SECTION_MOBILE_MARGIN_Y,rotationInDegrees:0}}var rn=function(n){return n.components||n.children},an=function(n){return o.get(n,["components",0])||o.get(n,["children",0])};function un(n,e){void 0===n&&(n=[]),void 0===e&&(e=[]);var t=function(n,e){return Math.min(n[1],e[1])-e[0]};return n[0]<=e[0]?t(n,e):t(e,n)}function cn(n,e){var t=function(n){return[n.layout.y,n.layout.height+n.layout.y]};return un(t(n),t(e))}function sn(n,e){if(w(n))return e.layout.width;if(w(e))return n.layout.width;var t=function(n){return[n.layout.x,n.layout.width+n.layout.x]};return un(t(n),t(e))}var ln=function(n){return n.layout.width*n.layout.height};function fn(n,e){return w(n)?n.layout.height>=e.layout.height||ln(n)>ln(e):!w(e)&&ln(n)>ln(e)}function dn(n,e,t){var o=sn(n,e),r=cn(n,e);if(o<=0||r<=0)return!1;var i=o*r,a=Math.min(ln(n),ln(e));return i>0&&i/a>=t}function mn(n){return!!X(n)&&("columns"===n.conversionData.category?1===o.size(n.components)&&o.isEmpty(n.components[0].components):o.isEmpty(n.components))}function pn(n,e){return h(e)&&o.get(n,["conversionData","isInvisible"],!1)}var vn=function(n,e){var t,r;void 0===e&&(e=!1);var i=[[n]];try{for(var a=u(i),c=a.next();!c.done;c=a.next()){var s=c.value;o.forEach(s,(function(n){var t=e?o.get(n,"mobileComponents"):rn(n);o.isEmpty(t)||i.push(t)}))}}catch(n){t={error:n}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return o.flatten(i)};function yn(n,e,t){void 0===e&&(e=!1);var r=vn(n,e);return o(r).remove(t).keyBy("id").value()}var hn=function(n){return o.get(n,["conversionData","isSemiTransparentContainer"],!1)}},function(n,e,t){"use strict";t.d(e,"a",(function(){return o}));var o={MOBILE_WIDTH:320,MARGIN_BETWEEN_TEXT_AND_NON_TEXT:20,COMPONENT_MOBILE_MARGIN_X:10,COMPONENT_MOBILE_MARGIN_Y:10,SECTION_MOBILE_MARGIN_Y:20,SITE_SEGMENT_PADDING_X:20,TINY_MENU_SIZE:50,TEXT_MAX_LENGTH_FOR_RESCALING:25,MIN_WIDTH_FOR_ENLARGE:140,DEFAULT_TEXT_HEIGHT:10,VIRTUAL_GROUP_TYPES:{RESCALE:"RESCALE_VIRTUAL_GROUP",MERGE:"MERGE_VIRTUAL_GROUP"}}},function(n,e,t){"use strict";t.d(e,"e",(function(){return i})),t.d(e,"c",(function(){return a})),t.d(e,"b",(function(){return u})),t.d(e,"a",(function(){return s})),t.d(e,"d",(function(){return f})),t.d(e,"g",(function(){return d})),t.d(e,"h",(function(){return m})),t.d(e,"f",(function(){return p}));var o=t(0),r=t(1),i=function(n){return 0===n?0:n/Math.abs(n)},a=function(n,e){return"x"===e?n.layout.width:n.layout.height},u=function(n,e){return n.layout[e]+a(n,e)};function c(n,e,t,r){void 0===r&&(r=.1);var i=o.get(n,t),a=o.get(e,t);return Math.abs(i-a)<=r*o.min([i,a])}function s(n,e,t){return n===e||o.size(n)===o.size(e)&&!l(n,t)&&!l(e,t)&&o.every(n,(function(n,r){var i=e[r];return n.componentType===i.componentType&&function(n,e,t,r){void 0===r&&(r=.1);var i=o.get(n,["layout",t]),u=o.get(e,["layout",t]);return Math.abs(i-u)<=r*o.min([a(n,t),a(e,t)])}(n,i,t)&&("text"===n.conversionData.category?c(n,i,["conversionData","averageNormalizedFontSize"]):c(n,i,["layout","height"])&&c(n,i,["layout","width"]))}))}function l(n,e){var t=o.findIndex(n,(function(t,r){if(0===r)return!1;var i=u(n[r-1],e),c=t.layout[e]-i;return c<0||c>o.min([a(n[r-1],e),a(t,e)])}));return-1!==t&&t!==n.length-1}function f(n){var e=r.getChildren(n);return o.map(n.conversionData.componentsOrder,(function(n){return o.find(e,{id:n})}))}var d=function(n){return r.isRescaleVirtualGroup(n)&&"reorder"!==n.conversionData.rescaleMethod||n.conversionData.structuralContainer};function m(n,e){var t=o.map(r.getChildren(n),"id");return o.sortBy(e,(function(n){return t.indexOf(n.id)}))}function p(n){var e=o.pick(n.conversionData.mobileHints,["recommendedWidth","recommendedHeight","recommendedScale","recommendedOrder"]);return!o.isEmpty(e)}},function(n,t){n.exports=e},function(n,e,t){"use strict";t.d(e,"c",(function(){return a})),t.d(e,"b",(function(){return u})),t.d(e,"a",(function(){return c}));var o=t(0),r=["TINY_MENU","BACK_TO_TOP_BUTTON","QUICK_ACTION_BAR","QUICK_ACTION_BAR_ITEM","MENU_AS_CONTAINER_TOGGLE","MENU_AS_CONTAINER_EXPANDABLE_MENU"],i=["wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.BackToTopButton","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.QuickActionBarItem","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.ExpandableMenu"],a=function(n){return Object(o.includes)(r,n)},u=function(n){return Object(o.includes)(i,Object(o.get)(n,"componentType"))},c=function(n){return u(n)||(e=n,Object(o.get)(e,["conversionData","mobileOnly"]));var e}},function(n,e,t){"use strict";t.d(e,"a",(function(){return C})),t.d(e,"b",(function(){return b})),t.d(e,"c",(function(){return P}));var o=t(0),r=t(3),i=t(4),a=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},u=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(a(arguments[e]));return n},c="start",s="end",l=1,f=1.25;function d(n,e){return o.transform(n,(function(n,t,o){var r=e(o);return n[r]=n[r]||{comps:[],distanceToPreviousFragment:t.distanceToPreviousFragment},n[r].comps=u(n[r].comps,t.comps),n}),[])}var m={singleCompRow:function(n,e,t){if("x"===t)return null;var i=o.findIndex(n,(function(n){return 1===o.size(n.comps)}));if(-1===i)return null;var a=d(n,(function(n){return Object(r.e)(n-i)+Object(r.e)(i)}));return{type:"singleCompRow",fragments:a,fragmentsEvents:M(e,a)}},verticalDivider:function(n,e,t){if(o.size(n)<3||o.every(n,(function(n){return 1===o.size(n.comps)}))||"y"===t)return null;var i=function(n,e){var t=o(e.y).partition({eventType:c}).map((function(n){return o.map(n,"coordinate")})).value(),i=o.max(t[0]),a=o.min(t[1]);return o.findIndex(n,(function(n){var e=n.comps[0];return 1===n.comps.length&&e.conversionData.keepIfVerticalDivider&&e.layout.y<=a&&Object(r.b)(e,"y")>=i}))}(n,e);if(-1===i)return null;o.set(n[i].comps[0],["conversionData","isVerticalDivider"],!0);var a=d(n,(function(n){return Object(r.e)(n-i)+Object(r.e)(i)}));return{type:"verticalDivider",fragments:a,fragmentsEvents:M(e,a)}},mirrorPattern:function(n,e,t){if(o.size(n)<2)return null;var i=M(e,n),a=v(t),u=o.map(i,(function(n){return p(n[a])})),c=o.every(u,(function(n){return Object(r.a)(n,u[0],a)}));return c&&c?h(o.flatten(u),e,{type:"mirrorPattern"}):null},chessPattern:function(n,e,t){if("y"!==t||o.size(n)<2||!o.every(n,(function(n){return 2===o.size(n.comps)})))return null;var r=M(e,n),i=o.map(r,(function(n){return p(n.x)})),a=o.flatMap(i,(function(n,e){return y(e)?n:o.reverse(n)})),u=a[0].conversionData.category,c="text"===u?"photo":"text";return o.every(a,(function(n,e){return n.conversionData.category===(y(e)?u:c)}))?h(a,e,{type:"chessPattern"}):null}},p=function(n){return o(n).map("compRef").uniq().value()},v=function(n){return"x"===n?"y":"x"},y=function(n){return n%2==0};function h(n,e,t){return o.assign(t,{fragments:[{comps:n,distanceToPreviousFragment:-1}],fragmentsEvents:[e]})}function g(n,e){var t=o.findLastIndex(n,(function(n){if(n.coordinate===e.coordinate){if(n.eventType===c&&e.eventType===c)return n.size>e.size;if(n.eventType===s&&e.eventType===s)return n.size<e.size;if(n.eventType===c&&e.eventType===s)return n.compRef===e.compRef;if(n.eventType===s&&e.eventType===c)return n.compRef!==e.compRef}return n.coordinate<e.coordinate}));return n.splice(t+1,0,e),n}function C(n,e){var t=o.transform(n,(function(n,t){var o=t.layout[e]||0,i=Object(r.b)(t,e)||o,a=Object(r.c)(t,e)||0;return g(n,{eventType:c,compRef:t,coordinate:o,size:a}),g(n,{eventType:s,compRef:t,coordinate:i,size:a}),n}),[]);return o.map(t,(function(n){return o.omit(n,"size")}))}function b(n){var e=[],t=[];return o.forEach(n,(function(n){var r=o.last(t);if(n.eventType===c){if(o.isEmpty(e)){var i={events:[n],distanceToPreviousFragment:r?n.coordinate-o.last(r.events).coordinate:-1};t.push(i)}else r.events.push(n);e.push(n)}else o.remove(e,{compRef:n.compRef}),r.events.push(n)})),o.map(t,(function(n){return{comps:p(n.events),distanceToPreviousFragment:n.distanceToPreviousFragment}}))}function D(n,e,t){var r=o.maxBy(n,"distanceToPreviousFragment"),i=o.findIndex(n,r),a=d(n,(function(n){return n<i?0:1})),u=[n[i-1],r],c=o.filter(e[v(t)],(function(n){return o.some(u,(function(e){return o.includes(e.comps,n.compRef)}))})),s={fragmentsEvents:M(e,a),fragments:a},l=T(u,c,t);return o.assign(s,{maxCompsDistance:l})}function T(n,e,t){var i=function(n,e){return o(n).map((function(n,t){return t?o.map(n,(function(n){return o.defaults({closestPoint:n.compRef.layout[e]},n)})):o.map(n,(function(n){return o.defaults({closestPoint:Object(r.b)(n.compRef,e)},n)}))})).map((function(n,e){return o.reduce(n,(function(n,t){var r=o.last(n);return r&&r.eventType!==s?r.compRef===t.compRef?u(n,[t]):((e&&t.closestPoint<r.closestPoint||!e&&t.closestPoint>r.closestPoint)&&n.splice(n.length-1,1,t),n):n.concat(t.eventType===c?[t]:[])}),[])})).value()}(o.partition(e,(function(e){return o.includes(n[0].comps,e.compRef)})),t),a=[0,0],l=[[],[]];for(var f=-1/0;a[0]<i[0].length||a[1]<i[1].length;){var d=a[0]===i[0].length||a[1]===i[1].length?a[0]===i[0].length?1:0:i[0][a[0]].coordinate<=i[1][a[1]].coordinate?0:1,m=i[d][a[d]++];if(m.eventType!==s){l[d].push(m);var p=[o.maxBy(l[0],"closestPoint"),o.minBy(l[1],"closestPoint")],v=o.get(p,[1,"closestPoint"])-o.get(p,[0,"closestPoint"]);!o.isNaN(v)&&v>f&&(f=v)}else o.remove(l[d],{compRef:m.compRef})}return f}function O(n,e){return o.transform(n,(function(n,t){var r=o.findIndex(e,(function(n){return o.includes(n.comps,t.compRef)}));return n[r]=u(n[r]||[],[t]),n}),[])}function M(n,e){var t=O(n.x,e),r=O(n.y,e);return o.map(o.keys(e),(function(n){return o.assign({},{x:t[n],y:r[n]})}))}function E(n,e,t,r){return function(n,e,t){var r=null;return o.forEach(m,(function(o,i){if(!t[i])return!0;var a=o(e.y,n,"y"),u=o(e.x,n,"x");return null===(r=a&&u?null:a||u)})),r}(n,e,t)||function(n,e,t){void 0===t&&(t=!1);var r=o.size(e.x)>1?D(e.x,n,"x"):null,i=o.size(e.y)>1?D(e.y,n,"y"):null;if(r&&i){var a=t?3.27:f,u=l*r.maxCompsDistance>a*i.maxCompsDistance?r:i;return o.pick(u,["fragments","fragmentsEvents"])}return r||i}(n,e,r)}function S(n,e,t,i){if(o.size(e)<2)return e||[];var a=o.mapValues(t,b);if(1===o.size(a.x)&&1===o.size(a.y))return i.detectSemanticGroups?i.useOverlapRules?function(n,e){e=Object(r.h)(n,e);var t="overlayGroup_"+(e=o.sortBy(e,"layout.y"))[0].id;return o.forEach(e,(function(n){return o.set(n,["conversionData","overlayGroupId"],t)})),e}(n,e):function(n,e,t){var r=function(n){return o.some(n,"conversionData.originalLayout")};if(r(e)||o.some(e,(function(n){return r(n)})))return w(e),e;x(e);var i=C(e,"y"),a=C(e,"x"),u=S(n,e,{y:i,x:a},t);return w(u),u}(n,e,i):Object(r.h)(n,e);var u=E(t,a,{mirrorPattern:i.detectSemanticGroups,chessPattern:i.detectSemanticGroups,verticalDivider:!0,singleCompRow:!0},i.enableNewMergeFlow);return 1===o.size(u.fragments)?u.fragments[0].comps:o.flatMap(u.fragments,(function(e,t){return S(n,e.comps,u.fragmentsEvents[t],i)}))}function x(n){o.forEach(n,(function(n){var e=n.layout,t=o.assign(i.objectUtils.cloneDeep(e),{height:.9*e.height,width:.9*e.width});n.layout=t,o.set(n,["conversionData","originalLayout"],e)}))}function w(n,e){void 0===e&&(e=!0),o.forEach(n,(function(n){var e=o.get(n,["conversionData","originalLayout"]);e&&(n.layout=i.objectUtils.cloneDeep(e),delete n.conversionData.originalLayout)})),e&&o.forEach(n,(function(n){return w(n.components,!1)}))}function P(n,e,t){var r=S(n,e,{y:C(e,"y"),x:C(e,"x")},t);n.conversionData.componentsOrder=o.map(r,"id")}r.h},function(n,e,t){"use strict";t.r(e),t.d(e,"conversionUtils",(function(){return I})),t.d(e,"conversionConfig",(function(){return p.a})),t.d(e,"mobileHints",(function(){return o})),t.d(e,"validators",(function(){return a})),t.d(e,"removeConversionDataRecursively",(function(){return un})),t.d(e,"textUtils",(function(){return Wt})),t.d(e,"structuresComparer",(function(){return Ut})),t.d(e,"mobileOnlyComponents",(function(){return Yt})),t.d(e,"conversion",(function(){return Xt}));var o={};t.r(o),t.d(o,"calculateOffsetsMobileHints",(function(){return T})),t.d(o,"sortPresets",(function(){return M})),t.d(o,"parseMobilePreset",(function(){return x})),t.d(o,"getConversionOrder",(function(){return w})),t.d(o,"testAPI",(function(){return P}));var r={};t.r(r),t.d(r,"getAdditionalStyles",(function(){return k})),t.d(r,"addToStructure",(function(){return R}));var i={};t.r(i),t.d(i,"addToStructure",(function(){return F}));var a={};t.r(a),t.d(a,"getDuplicates",(function(){return Ht})),t.d(a,"containsDuplicates",(function(){return zt}));var u=t(0),c={"adobe-caslon-w01-smbd":{referencePoints:[17,40,82],friendlyName:"Adobe Caslon"},'"amatic sc"':{referencePoints:[18,42,84],friendlyName:"Amatic SC"},"americantypwrteritcw01--731025":{referencePoints:[16,42,84],friendlyName:"American Typewriter"},anton:{referencePoints:[15,36,78],friendlyName:"Anton"},arial:{referencePoints:[15,40,82],friendlyName:"Arial"},'"arial black"':{referencePoints:[15,40,82],friendlyName:"Arial Black"},"avenida-w01":{referencePoints:[20,45,88],friendlyName:"Avenida"},"avenir-lt-w01_85-heavy1475544":{referencePoints:[15,40,82],friendlyName:"Avenir"},"avenir-lt-w01_35-light1475496":{referencePoints:[15,40,82],friendlyName:"Avenir Light"},basic:{referencePoints:[15,40,82],friendlyName:"Basic"},"belinda-w00-regular":{referencePoints:[19,44,88],friendlyName:"Belinda"},"bodoni-w01-poster":{referencePoints:[15,40,82],friendlyName:"Bodoni Poster"},"braggadocio-w01":{referencePoints:[15,36,78],friendlyName:"Braggadocio"},"brandon-grot-w01-light":{referencePoints:[18,42,86],friendlyName:"Brandon Grotesque"},"bree-w01-thin-oblique":{referencePoints:[16,40,82],friendlyName:"Bree"},caudex:{referencePoints:[16,41,84],friendlyName:"Caudex"},'"chelsea market"':{referencePoints:[15,40,82],friendlyName:"Chelsea Market"},cinzel:{referencePoints:[15,40,82],friendlyName:"Cinzel"},"clarendon-w01-medium-692107":{referencePoints:[17,44,84],friendlyName:"Clarendon LT"},'"comic sans ms"':{referencePoints:[15,40,82],friendlyName:"Comic Sans MS"},cookie:{referencePoints:[22,52,100],friendlyName:"Cookie"},"coquette-w00-light":{referencePoints:[18,44,84],friendlyName:"Coquette"},corben:{referencePoints:[16,42,82],friendlyName:"Corben"},'"courier new"':{referencePoints:[17,48,96],friendlyName:"Courier New"},"dinneuzeitgroteskltw01-_812426":{referencePoints:[15,40,82],friendlyName:"DIN Neuzeit Grotesk"},"din-next-w01-light":{referencePoints:[15,40,82],friendlyName:"DIN Next Light"},"droid-serif-w01-regular":{referencePoints:[15,40,82],friendlyName:"Droid Serif"},'"eb garamond"':{referencePoints:[18,42,84],friendlyName:"EB Garamond"},enriqueta:{referencePoints:[15,40,80],friendlyName:"Enriqueta"},forum:{referencePoints:[17,44,86],friendlyName:"Forum"},'"fredericka the great"':{referencePoints:[15,38,76],friendlyName:"Fredericka the Great"},"futura-lt-w01-book":{referencePoints:[15,38,76],friendlyName:"Futura"},"futura-lt-w01-light":{referencePoints:[15,38,76],friendlyName:"Futura Light"},georgia:{referencePoints:[15,40,80],friendlyName:"Georgia"},"geotica-w01-four-open":{referencePoints:[15,40,82],friendlyName:"Geotica Four Open"},"helvetica-w01-roman":{referencePoints:[15,40,82],friendlyName:"Helvetica"},impact:{referencePoints:[15,36,76],friendlyName:"Impact"},"itc-arecibo-w01-regular":{referencePoints:[18,44,88],friendlyName:"ITC Arecibo"},'"jockey one"':{referencePoints:[16,42,82],friendlyName:"Jockey One"},'"josefin slab"':{referencePoints:[18,42,82],friendlyName:"Josefin Slab"},jura:{referencePoints:[18,44,90],friendlyName:"Jura"},'"kelly slab"':{referencePoints:[15,38,78],friendlyName:"Kelly Slab"},"kepler-w03-light-scd-cp":{referencePoints:[18,45,85],friendlyName:"Kepler"},'"libre baskerville"':{referencePoints:[15,37,76],friendlyName:"Libre Baskerville"},"didot-w01-italic":{referencePoints:[15,40,82],friendlyName:"Linotype Didot"},lobster:{referencePoints:[17,42,82],friendlyName:"Lobster"},'"lucida console"':{referencePoints:[15,38,78],friendlyName:"Lucida Console"},'"lucida sans unicode"':{referencePoints:[15,38,78],friendlyName:"Lucida Sans Unicode"},"lulo-clean-w01-one-bold":{referencePoints:[14,36,76],friendlyName:"Lulo Clean"},'"marck script"':{referencePoints:[20,48,92],friendlyName:"Marck Script"},"marzo-w00-regular":{referencePoints:[15,40,78],friendlyName:"Marzo"},monoton:{referencePoints:[14,36,76],friendlyName:"Monoton"},"baskervillemtw01-smbdit":{referencePoints:[18,44,88],friendlyName:"Monotype Baskerville"},'"mr de haviland"':{referencePoints:[22,46,94],friendlyName:"Mr De Haviland"},"museo-w01-700":{referencePoints:[15,40,82],friendlyName:"Museo"},"museo-slab-w01-100":{referencePoints:[15,40,82],friendlyName:"Museo Slab"},niconne:{referencePoints:[20,46,90],friendlyName:"Niconne"},"nimbus-sans-tw01con":{referencePoints:[17,44,88],friendlyName:"Nimbus Sans"},'"noticia text"':{referencePoints:[15,40,82],friendlyName:"Noticia Text"},'"open sans"':{referencePoints:[15,40,82],friendlyName:"Open Sans"},'"open sans condensed"':{referencePoints:[15,40,82],friendlyName:"Open Sans Condensed"},overlock:{referencePoints:[16,42,84],friendlyName:"Overlock"},"pacifica-w00-condensed":{referencePoints:[14,36,74],friendlyName:"Pacifica Condensed"},'"palatino linotype"':{referencePoints:[16,44,86],friendlyName:"Palatino Linotype"},'"patrick hand"':{referencePoints:[17,44,86],friendlyName:"Patrick Hand"},"peaches-and-cream-regular-w00":{referencePoints:[26,54,120],friendlyName:"Peaches & Cream"},play:{referencePoints:[15,42,84],friendlyName:"Play"},'"playfair display"':{referencePoints:[15,40,82],friendlyName:"Playfair Display"},"proxima-n-w01-reg":{referencePoints:[15,41,82],friendlyName:"Proxima Nova"},raleway:{referencePoints:[15,40,82],friendlyName:"Raleway"},"reklamescriptw00-medium":{referencePoints:[16,40,80],friendlyName:"Reklame Script"},"rosewood-w01-regular":{referencePoints:[15,39,81],friendlyName:"Rosewood"},sacramento:{referencePoints:[24,46,88],friendlyName:"Sacramento"},sail:{referencePoints:[22,46,88],friendlyName:"Sail"},sarina:{referencePoints:[16,40,82],friendlyName:"Sarina"},signika:{referencePoints:[16,42,84],friendlyName:"Signika"},"snellroundhandw01-scrip":{referencePoints:[20,46,88],friendlyName:"Snell Roundhand"},"soho-w01-thin-condensed":{referencePoints:[16,40,82],friendlyName:"Soho Condensed"},spinnaker:{referencePoints:[15,40,82],friendlyName:"Spinnaker"},"stencil-w01-bold":{referencePoints:[14,38,78],friendlyName:"Stencil"},tahoma:{referencePoints:[15,40,82],friendlyName:"Tahoma"},'"times new roman"':{referencePoints:[16,42,86],friendlyName:"Times New Roman"},"trend-sans-w00-four":{referencePoints:[14,38,74],friendlyName:"Trend"},verdana:{referencePoints:[15,40,82],friendlyName:"Verdana"}},s={min:14,max:105},l={min:1,max:40},f=[[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[18,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[19,19,19,19,19,18,18,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[20,20,20,20,19,19,19,19,19,19,19,19,18,18,18,18,18,18,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17],[21,21,21,20,20,20,20,19,19,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[22,22,21,21,21,21,20,20,20,20,20,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[22,22,21,21,21,21,20,20,20,20,20,19,19,19,19,19,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18],[23,23,22,22,21,21,21,20,20,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[25,24,23,23,22,22,22,21,21,21,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[26,25,24,23,23,22,22,22,21,21,21,20,20,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19],[27,26,25,24,24,23,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[28,27,26,25,24,23,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[29,28,27,26,25,24,23,22,22,21,21,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],[30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[31,30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[32,31,30,29,28,27,26,25,24,23,23,22,22,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21],[33,32,31,30,29,28,27,26,25,24,24,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[34,33,32,31,30,29,28,27,26,25,24,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[34,33,32,31,30,29,28,27,26,25,24,23,23,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[36,35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[36,35,34,33,32,31,30,29,28,27,26,25,24,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[37,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[38,36,34,34,33,32,31,30,29,28,27,26,25,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],[38,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[38,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25],[39,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[39,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29],[40,36,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,34,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31,31],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33,33],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,37,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36],[40,38,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37]],d=[15,40,82];function m(n,e,t){return Math.max(Math.min(n,t),e)}var p=t(2),v=t(6),y=function(){return(y=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)},h=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},g=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(h(arguments[e]));return n},C=function(n,e){return v.a(n,e)},b=function(n){return u.map(v.b(n),"comps")};function D(n){var e=u.get(n,["metaData","originalCompId"]),t=function(n){return u.get(n,["metaData","author"])}(n)||"studio",o=n.layout,r=o.width,i=o.height,a=o.scale;return u.assign({recommendedWidth:r,recommendedHeight:i,recommendedScale:a,author:t},e?{originalCompId:e}:{})}function T(n,e,t){return n?"rightTop"===t?{offsetX:e.layout.x-n.layout.x-n.layout.width,offsetY:e.layout.y-n.layout.y,offsetOrigin:t}:"leftBottom"===t?{offsetX:e.layout.x-n.layout.x,offsetY:e.layout.y-n.layout.y-n.layout.height,offsetOrigin:t}:{offsetX:e.layout.x-n.layout.x,offsetY:e.layout.y-n.layout.y,offsetOrigin:"leftTop"}:{offsetX:e.layout.x,offsetY:e.layout.y,offsetOrigin:"leftTop"}}function O(n,e,t){return void 0===e&&(e=0),void 0===t&&(t=0),t?"leftTop":e?"rightTop":n?"leftBottom":"leftTop"}function M(n){var e=u.map(n,"id"),t=C(n,"y"),o=b(t);return u.reduce(o,(function(n,t,o){if(1===u.size(t))return g(n,[{preset:t[0],offsetOrigin:O(o)}]);var r=C(t,"x"),i=b(r);return u.reduce(i,(function(n,t,r){if(1===u.size(t))return g(n,[{preset:t[0],offsetOrigin:O(o,r)}]);var i=u.sortBy(t,(function(n){return e.indexOf(n.id)})),a=u.map(i,(function(n,e){return{preset:n,offsetOrigin:O(o,r,e)}}));return g(n,a)}),n)}),[])}function E(n){var e=u.map(n.components,(function(n){return E(n)})),t=M(n.components),o=t.reduce((function(n,e,o){var r=u.get(t,[o-1,"preset"],null),i=D(e.preset),a=T(r,e.preset,e.offsetOrigin),c=y(y(y({},i),a),{orderIndex:o});return u.set(n,e.preset.id,c)}),{});return u.assign.apply(u,g([o],e))}function S(n){if(n.mobileStructure){var e=u.assign({metaData:{}},u.pick(n,["id","componentType","type"]),u.pick(n.mobileStructure,["layout"]),u.pick(n.mobileStructure,"metaData"),u.pick(n.mobileStructure,["metaData"]),u.pick(n.mobileStructure,["parent"]));if(u.has(n,"components")){var t=u(n.components).map(S).compact().value();u.set(e,"components",t)}return e}}function x(n){var e=S(n);if(!e)return{};var t=e.components?E(e):{};return u.set(t,e.id,D(e)),t}function w(n){var e=u.map(n,"id"),t=C(n,"y"),o=b(t),r=u.reduce(o,(function(n,t){if(1===u.size(t))return g(n,t);var o=C(t,"x"),r=b(o);return u.reduce(r,(function(n,t){if(1===u.size(t))return g(n,t);var o=u.sortBy(t,(function(n){return e.indexOf(n.id)}));return g(n,o)}),n)}),[]);return u.map(r,"id")}var P={calculateRootMobileHints:D,calculateOffsetsMobileHints:T,getOffsetOrigin:O,getMobilePreset:S,sortPresets:M,parseChildMobilePresets:E},I=t(1),N={color_11:"tmFull1",color_27:"tmFull1",color_32:"tmFull1",color_15:"tmFull2",color_18:"tmFull2",color_25:"tmFull2"},_={type:"Component",id:"TINY_MENU",componentType:"wysiwyg.viewer.components.mobile.TinyMenu",skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",layout:u.merge(I.getTinyMenuDefaultPosition(),{height:p.a.TINY_MENU_SIZE,width:p.a.TINY_MENU_SIZE}),dataQuery:"#TINY_MENU",styleId:"tmFull1"},A={tmFull1:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",style:{properties:{borderwidth:"0",bg:"color_11","alpha-bg":0,txt:"color_11",separatorHeight:"0",textAlignment:"center",txts:"color_18",iconcolor:"color_15",iconcolorSelected:"color_11"}}},tmFull2:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",style:{properties:{borderwidth:"0",bg:"color_11","alpha-bg":0,txt:"color_11",separatorHeight:"0",textAlignment:"center",txts:"color_18",iconcolor:"color_11",iconcolorSelected:"color_11"}}},tm2:{skin:"wysiwyg.viewer.skins.mobile.TinyMenuSkin",style:{properties:{bg:"color_11",bgh:"color_13",bgs:"color_18",txts:"color_15",txt:"color_15"}}}},k=function(){return A};function R(n){var e=I.getComponentByIdFromStructure("SITE_HEADER",n),t=u.get(N,u.get(e.conversionData,"backgroundColor"),"tmFull1"),o=u.defaults({styleId:t},_);I.addComponentsTo(e,[o]),I.ensureContainerTightlyWrapsChildren(e,e.components,!0)}var B={type:"Component",id:"BACK_TO_TOP_BUTTON",componentType:"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",skin:"wysiwyg.viewer.skins.backtotopbutton.BackToTopButtonSkin",layout:{height:0,width:0,x:0,y:0},dataQuery:null,styleId:""},F=function(n){return I.addComponentsTo(n,[B])},L={TINY_MENU:r,BACK_TO_TOP_BUTTON:i};function G(n,e){var t=L[e];t&&!I.getComponentByIdFromStructure(e,n)&&t.addToStructure(n)}var j=t(5);function H(n,e){if(e){for(var t=[],o=0;o<e.length;){var r=e[o];I.isVirtualGroup(r)&&(I.translateComps(r.components,r.layout.x,r.layout.y),I.addComponentsTo(n,r.components,o+1),t.push(r)),o++}I.removeChildrenFrom(n,t),u.forEach(e,(function(n){return H(n,n.components)}))}}var z=1e3;function W(n){return u.assign(n,{type:"undefined",id:u.toLower(n.componentType)+"_"+z++,skin:"undefined",styleId:"undefined"})}function U(n,e,t,o){var r=W({layout:I.getSnugLayout(e),conversionData:u.assign(t,{hasTightYMargin:!0,isTightContainer:!0,marginX:0}),componentType:p.a.VIRTUAL_GROUP_TYPES.RESCALE,components:e});return I.translateComps(e,-r.layout.x,-r.layout.y),I.removeChildrenFrom(n,e),I.addComponentsTo(n,[r],o),r}function Y(n){u.forEach(n,(function(n){n.layout&&!I.isFixedPositionAllowed(n)&&(n.layout.fixedPosition=!1)}))}function X(n,e,t){var o=I.getAllCompsInStructure(n);return t.keepEmptyTextComponents||function n(e){var t,o;if(e)for(t=e.length-1;t>=0;t--)o=e[t],I.isTextComponent(o)?0===u.get(o.conversionData,"textLength",0)&&e.splice(t,1):n(o.components)}(e),function n(e){u.remove(e,(function(t,o){return!!(I.isScreenWidthComponent(t)&&u.get(t,["conversionData","isSolidColorBackground"])&&function(n,e){return u.find(e,(function(e){return I.isScreenWidthComponent(e)&&n.layout.y===e.layout.y&&n.layout.height===e.layout.height}))}(t,u.slice(e,o+1)))||(n(t.components),!1)}))}(e),Y(o),u.forEach(e,K),Q(n,e),Z(n,e,t.keepNotRecommendedMobileComponents),t.keepOutOfScreenComponents||function n(e,t,o,r){var i,a,u,c=0;if(t)for(;c<t.length;)i=t[c],a=i.layout.y+i.layout.height,u=i.layout.x+i.layout.width,a+r<0||i.layout.x>1500||u+o<-500?t.splice(c,1):(n(i,i.components,o+i.layout.x,r+i.layout.y),c++);return e}(n,e,0,0),function n(e){return u.forEachRight(e,(function(t,o){var r=J(t,u.slice(e,0,o))||J(t,u.slice(e,o),I.isSemiTransparentContainer);if(function(n,e){return e&&(u.get(e,["conversionData","nestOverlayingSiblings"],!0)||I.shouldReparentCompToChildOfContainer(n,e))&&!u.get(n,["conversionData","isNonContainableFullWidth"],!1)}(t,r)){var i=0;I.isColumnsContainerComponent(r)&&(i=r.layout.y,r.components.length>0&&(r=u.head(r.components))),I.reparentComponent(r,t),t.layout.y-=i,e.splice(o,1)}else n(t.components)})),e}(e),t.keepOccludedAndEmptyBackgrounds||function n(e){var t=function(n){return n.conversionData.hideWhenEmptyBackgroundContainer&&n.conversionData.isSolidColorBackground&&I.isEmptyContainer(n)};u.remove(e,(function(e){return!!t(e)||("columns"===u.get(e,["conversionData","category"])&&u.every(e.components,t)||n(e.components),!1)}))}(e),I.isMasterPage(n)&&V(e),t.keepInvisibleComponents||function n(e){u.forEachRight(e,(function(t,o){J(t,u.slice(e,o+1),u.negate((function(n){return u.get(n,["conversionData","isSemiTransparentContainer"],!1)||u.get(n,["conversionData","structuralItem"],!1)})),1)?(u.set(t,["conversionData","mobileHints","hidden"],!0),e.splice(o,1)):n(t.components)}))}(e),n}function V(n){var e=u.find(n,{id:"SITE_HEADER"}),t=u.find(n,{id:"SITE_FOOTER"});u(n).remove(u.negate(I.isAllowedToBeInMasterPage)).forEach((function(n){var o=function(n,e){var t=function(n){return n.layout.y+(n.layout.height||0)/2},o=t(n);return u.size(e)?u.minBy(e,(function(n){var e=Math.abs(o-t(n));return u.isNaN(e)?0:e})):null}(n,[e,t]);I.reparentComponent(o,n)}))}var q=function(n,e){return u.reduce(n,(function(n,e){return n[e.id]=e,e.components&&q(e.components,n),n}),e)};function K(n){u.forEach(n.components,K);var e=u.get(n,["conversionData","actualTextWidth"]);if(!(u.isUndefined(e)||e>=n.layout.width))if(0!==e){var t=u.get(n,["conversionData","textAlignments"],["left"]);if(1===u.size(t)){switch(u.head(t)){case"center":n.layout.x+=(n.layout.width-e)/2;break;case"right":n.layout.x+=n.layout.width-e}n.layout.width=e}}else n.layout.width=0}function Q(n,e){for(var t=0,o=function(){var o=e[t],r=o.components;if(!u.get(o,["conversionData","mobileHints","hidden"]))return I.isColumnsContainerComponent(o)?(u(r).filter("conversionData.mobileHints.hidden").forEach((function(n){return I.translateComps(n.components,o.layout.x,o.layout.y)})),Q(n,r)):Q(o,r),t++,"continue";I.isContainerComponent(o)&&(I.translateComps(r,o.layout.x,o.layout.y),I.addComponentsTo(n,r),o.components=[]),e.splice(t,1)};t<u.size(e);)o()}function Z(n,e,t){I.isMergeVirtualGroup(n)||u.remove(e,(function(n){if(u.get(n,["conversionData","desktopOnly"])||!t&&u.get(n,["conversionData","hideByDefault"]))return!0;Z(n,n.components,t)}))}function J(n,e,t,o){return void 0===o&&(o=.75),I.isSiteSegmentOrPage(n)?null:u.find(e,(function(e){return e.id!==n.id&&"PAGES_CONTAINER"!==e.id&&(!t||t(e))&&(I.isContainerComponent(e)||I.isPageComponent(e))&&(I.haveSufficientOverlap(e,n,o)||n.conversionData.isInvisible&&I.getYOverlap(e,n)>0)&&I.hasGreaterArea(e,n)}))}var $=t(4);function nn(n,e){u.forEachRight(Object(I.getChildren)(n),(function(t,o){var r,i,a,c;if(en(t))return tn(t)&&!on(t)?((r=t).layout.rotationInDegrees=90,void u.assign(r.layout,$.boundingLayout.getBoundingLayout(r.layout))):void(e&&(i=n,a=o,c=Object(I.getChildren)(i),u.remove(i.conversionData.componentsOrder,c[a].id),c.splice(a,1)));nn(t,e)}))}var en=function(n){return u.get(n,["conversionData","keepIfVerticalDivider"],!1)},tn=function(n){return en(n)&&u.get(n,["conversionData","isVerticalDivider"],!1)},on=function(n){return 90===n.layout.rotationInDegrees};function rn(n,e){!function n(e){u.forEach(Object(I.getChildren)(e),(function(e){tn(e)?on(e)&&(e.layout.rotationInDegrees=-90,u.assign(e.layout,$.boundingLayout.getBoundingLayout(e.layout)),e.layout.rotationInDegrees=90):n(e)}))}(n),H(n,e)}function an(n){return n.layout&&(delete n.layout.anchors,Object(j.b)(n)||Object(I.isDockingAllowed)(n)||delete n.layout.docked),delete n.conversionData,n}function un(n){var e=Object(I.getAllCompsInStructure)(n);return u.forEach(e,an),an(n)}var cn=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},sn=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(cn(arguments[e]));return n},ln=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function fn(n,e){return u.reduce(e,(function(e,t,o){return n[o]&&t.componentType&&n[o].componentType!==t.componentType&&e.push(o),e}),[])}function dn(n,e){var t=u.difference(u.keys(n),u.keys(e)),o=fn(n,e);return sn(t,o)}function mn(n,e){var t=u.difference(u.keys(e),u.keys(n));u.forEach(t,(function(n){return delete e[n]}))}function pn(n,e){u.forEach(I.getAllCompsInStructure(e),(function(e){var t=I.getComponentByIdFromStructure(e.id,n);t&&u.forEach(["dataQuery","nickname","behaviorQuery","connectionQuery"],(function(n){t.hasOwnProperty(n)?e[n]=t[n]:delete e[n]}))}))}function vn(n,e){if(u.isEmpty(e))return[];var t=u(e).filter((function(e){return!0===u.get(n,[e,"conversionData","filterChildrenWhenHidden"])})).uniq().value(),o=u(t).filter((function(e){return u.get(n[e],["conversionData","structuralContainer"],!1)})).flatMap((function(e){return u.map(I.getAllCompsInStructure(n[e],!1)||[],"id")})).compact().value(),r=u(t).filter((function(e){return I.isColumnsContainerComponent(n[e])})).flatMap((function(e){return u.get(n[e],"components",[])})).map("id").compact().value(),i=u.union(o,r);return u.difference(i,e)}var yn=function(n){return u(n).filter(["conversionData.mobileHints.hidden",!0]).map("id").value()},hn=function(n,e){var t,o;if(n&&n.length>0)try{for(var r=ln(n),i=r.next();!i.done;i=r.next()){var a=i.value;e.push(a.id),hn(I.getChildren(a),e)}}catch(n){t={error:n}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(t)throw t.error}}};var gn=function(n){var e=[],t=[];return Object.values(n).forEach((function(n){Object(j.a)(n)?e.push(n.id):t.push(n.id)})),{mobileComponentIds:t,mobileOnlyComponentIds:e}};var Cn=function(n,e,t){if(n){var o=I.getParentIdFromMobileHints(n);if(o){var r=e[o];if(I.isPageComponent(r))return;t.push(o),Cn(r,e,t)}}};function bn(n,e){var t=yn(n),o=vn(n,t),r=sn(t,o),i=function(n,e){return u.difference(u.map(n,"id"),e)}(n,u(e).filter(I.isExistsBeforeMerge).map("id").value()),a=function(n){return u(n).filter(I.isModifiedComponent).map("id").value()}(n),c=u.pullAll(function(n,e){if(u.isEmpty(e))return[];var t=e.map((function(e){return n[e]})).filter((function(n){return void 0!==n})),o=[];return hn(t,o),u.uniq(o)}(n,a),i),s=gn(e),l=s.mobileComponentIds,f=s.mobileOnlyComponentIds,d=function(n,e){var t=u.chain(n).filter(I.isFixedPositionElement).map("id").value();return u.intersection(t,e)}(n,l),m=u.uniq(sn(a,c,d)),p=function(n,e){var t=e.reduce((function(e,t){if(!n[t])return e;var o=I.getAllCompsInStructure(n[t]);return sn(e,u.map(o,"id"))}),[]),o=n.MENU_AS_CONTAINER;if(!o)return t;var r=I.getAllCompsInStructure(o);return sn(t,u.map(r,"id"))}(e,f),v=u.map(n,"id"),y=u.difference(l,v),h=fn(n,e),g=function(n,e){return u.chain(e).reject((function(e){var t=u.get(n,e.id);return!t||(I.isPageComponent(t)||I.isMasterPage(t)||I.isMasterPageChild(t))})).map("id").value()}(n,e),C=u.intersection(l,r),b=u.difference(g,m),D=function(n,e){var t=[];return u.forOwn(n,(function(n,o){"studio"===u.get(n,["conversionData","mobileHints","author"],"")&&e[o]&&t.push(o)})),t}(n,e),T=u.difference(dn(n,e),m),O=sn(u.pullAll(u.uniq(sn(b,h,y,C)),sn(D,u.pullAll(p,f)))),M=sn(u.pullAll(u.uniq(sn(T,b,i)),sn(D,u.pullAll(p,f)))),E=function(n,e){var t,o,r=[];try{for(var i=ln(n),a=i.next();!a.done;a=i.next()){var u=e[a.value];Cn(u,e,r)}}catch(n){t={error:n}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return r}(M,e);return M=u.uniq(sn(M,E)),{idsOfComponentsToDelete:O=u.uniq(sn(O,E)),idsOfComponentsToAdd:M,idsOfMobileModifiedComponents:u.pullAll(m,i),idsOfMobileOnlyComponents:f,idsOfNotExistingBeforeMergeComponents:i}}var Dn=t(3);function Tn(n,e){var t,o;!function(n,e){u.forEach(e,(function(t,o){t.conversionData.isTransparentContainer&&(t=u.head(t.components)||t);var r=e[o-1],i=Boolean(r),a=i&&r.layout.y+r.layout.height===t.layout.y&&r.layout.x===t.layout.x,c=u.get(n,["conversionData","hasTightMarginBetweenChildren"],!1);t.conversionData.tightWithPreviousSibling=a||i&&c}))}(n,e),function(n,e){n.conversionData.hasTightBottomMargin=u.some(e,(function(e){var t=u.get(e,["conversionData","isTransparentContainer"])&&!u.isEmpty(e.components)?u.head(e.components):e;return I.shouldStretchToScreenWidth(t)&&t.layout.y+t.layout.height>=n.layout.height}))}(n,e),t=e,o=u.size(t)-1,u.forEach(t,(function(n){var e=I.getChildren(n);n.conversionData.hasTightYMargin=!0===n.conversionData.isTightContainer||u.isEmpty(e)||!0===n.conversionData.isTransparentContainer&&(0===o||"column"!==n.conversionData.category)})),function(n,e){var t=u(e).map((function(n){var e=n.conversionData.textAlignments||[];return u(e).uniq().size()>1?"mixed":u.head(e)})).compact().uniq().value();1===u.size(t)&&(n.conversionData.naturalAlignment=u.head(t))}(n,e)}var On=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},Mn=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(On(arguments[e]));return n};function En(n,e){!function n(e,t){if(u.isEmpty(e.components))return;e.proportionGroups=e.proportionGroups||[];var o=[],r=$.objectUtils.cloneDeep(e),i=I.getChildren(r),a=function(){var n=xn(i[0],i);if(0===n.length)return u.remove(I.getChildren(r),i[0]),"continue";I.removeChildrenFrom(r,n),n.forEach((function(e){var t=xn(e,i);n=n.concat(t),I.removeChildrenFrom(r,t)})),n.length>1&&o.push(u.map(n,"id"))};for(;i.length>0;)a();e.proportionGroups=Mn(e.proportionGroups,o),u.forEach(t,(function(e){return n(e,e.components)}))}(n,e),function n(e,t){var o=function(n){return u.find(e.components,{id:n})};u.forEach(e.proportionGroups,(function(n){if(u.every(n,o)){var t=I.getComponentsByIds(e,n);U(e,t,{rescaleMethod:"proportional"})}})),u.forEach(t,(function(e){return n(e,e.components)}))}(n,e),function n(e,t){delete e.proportionGroups,u.forEach(t,(function(e){return n(e,e.components)}))}(n,e)}function Sn(n){return!I.isRescaleVirtualGroup(n)&&u.get(n,["conversionData","textLength"],0)<=p.a.TEXT_MAX_LENGTH_FOR_RESCALING&&u.get(n,["conversionData","isSuitableForProportionGrouping"],!1)&&u.every(n.components,Sn)}function xn(n,e){return Sn(n)?u.filter(e,(function(e){return Sn(e)&&I.haveSufficientOverlap(n,e,.25)})):[]}var wn=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},Pn=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(wn(arguments[e]));return n};function In(n,e,t,o){if(t<.01)return"break";if(t<.1)return"tight";var r=function(){return o>500?"h2v":"proportional"},i=function(){return o<500?"proportional":"tight"},a=function(){return"h2v"},c={photo:{text:r,graphic:r,photo:function(){return t>.5&&o<600?"proportional":"tight"}},graphic:{text:r,graphic:r,photo:r},text:{text:function(){return t>.5&&o<500?"proportional":"break"}},columns:{text:a,photo:a,graphic:a},group:{text:i,photo:i,graphic:i}};return u.get(c,[n,e],(function(){return"break"}))()}var Nn=function(n){return n.layout.x},_n=function(n){return n.layout.y},An=function(n){return n.layout.width},kn=function(n){return n.layout.height},Rn=function(n){return Nn(n)+An(n)},Bn=function(n){return _n(n)+kn(n)},Fn=function(n){return An(n)*kn(n)},Ln=function(n,e,t,o){return{layout:{x:o,y:n,width:Math.max(0,e-o),height:Math.max(0,t-n)}}},Gn=function(n,e){return Ln(Math.min(_n(n),_n(e)),Math.max(Rn(n),Rn(e)),Math.max(Bn(n),Bn(e)),Math.min(Nn(n),Nn(e)))};function jn(n){return{rescaleMethod:"break",overlapRatio:0,conversionData:u.pick(n.conversionData,"category"),layout:n.layout,components:[n]}}function Hn(n,e){var t=Fn(function(n,e){return Ln(Math.max(_n(n),_n(e)),Math.min(Rn(n),Rn(e)),Math.min(Bn(n),Bn(e)),Math.max(Nn(n),Nn(e)))}(n,e))/Fn(e);return{rescaleMethod:In(n.conversionData.category,e.conversionData.category,t,An(Gn(n,e))),overlapRatio:t}}function zn(n,e){if(1===u.size(e.components)&&u.get(e.components[0],["conversionData","isInvisible"],!1))return n;var t=u.map(n,(function(n){return Hn(n,e)})),o=function(n){var e=u(n).map((function(n,e){return"break"!==n.rescaleMethod?e:null})).filter(u.isNumber.bind(u)).value();return u.size(e)<=1||u.every(e,(function(e){return"proportional"===n[e].rescaleMethod}))?e:[u.maxBy(e,(function(e){return n[e].overlapRatio}))]}(t);if(u.isEmpty(o))return Pn(n,[e]);var r=u.reduce(o,(function(e,o){var r=n[o];return function(n){if(!u.includes(["h2v","tight"],n.rescaleMethod))return n;var e="tight"===n.rescaleMethod?0:n.overlapRatio;return u.forEach(n.components,(function(n,t){t&&(u.assign(n.conversionData,{tightWithPreviousSibling:!0,yOffsetRatio:e}),I.isTextComponent(n)&&(n.conversionData.yOffset=n.conversionData.mobileScale*n.conversionData.mobileAdjustedAverageFontSize*.5))})),n}(u.assign({components:Pn(r.components,e.components),layout:Gn(e,r).layout,conversionData:{category:"group",isTightContainer:!0,marginX:0}},t[o]))}),e);return u.remove(n,(function(n,e){return u.includes(o,e)})),n.push(r),u.reduce(n,zn,[])}var Wn=function(n){return u(n).groupBy("conversionData.overlayGroupId").filter((function(n,e){return e&&u.size(n)>1})).value()},Un=function(n){return u(n).map(jn).reduce(zn,[])};function Yn(n){var e=I.getSnugLayout(n);return e.width>=500?u.findIndex(n,(function(n){return u.isEqual(I.getSnugLayout([n]),e)})):-1}function Xn(n,e){return u.reduce(n,(function(n,t,o){var r=Object(Dn.e)(o-e)+(e?1:0);return n[r]?u.set(n,r,{components:Pn(n[r].components,[t]),rescaleMethod:"reorder"}):u.set(n,r,{rescaleMethod:"break",components:[t]})}),[])}function Vn(n){var e=Yn(n);return-1===e?[{rescaleMethod:"break",components:n}]:Xn(n,e)}function qn(n,e){var t={};return u.forEach(e,(function(e){var o=U(n,e.components,{rescaleMethod:e.rescaleMethod,category:"boxContainer"}),r=u(e.components).map("id").reduce((function(n,e){return u.set(n,e,o)}),{});u.assign(t,r)})),t}function Kn(n,e){Qn(n,qn(n,e))}function Qn(n,e){n.conversionData.componentsOrder=u.reduce(n.conversionData.componentsOrder,(function(n,t){var o=u.get(e,[t,"id"],t);return u.includes(n,o)?n:Pn(n,[o])}),[])}function Zn(n,e){Kn(n,u(Wn(e)).flatMap(Vn).filter({rescaleMethod:"reorder"}).value())}function Jn(n,e){var t=u(Wn(e)).map((function(e){return Object(Dn.h)(n,e)})).flatMap(Un).reject({rescaleMethod:"break"}).value();Kn(n,t)}var $n=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},ne=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat($n(arguments[e]));return n},ee={min:-10,max:25},te={min:-10,max:80},oe=3,re=20,ie={ROW:{rescaleMethod:"row"},LOGO:{rescaleMethod:"logo"}},ae=function(n){return!n.layout.fixedPosition&&!n.layout.rotationInDegrees},ue=function(n){return-I.getXOverlap(n[0],n[1])},ce=function(n,e){return u.inRange(ue(n),e.min,e.max)},se=function(n){return I.isTextComponent(n)&&n.conversionData.textLength<=oe},le=function(n){return I.isGraphicComponent(n)&&n.layout.width<=100},fe=function(n){return le(n)||se(n)},de=function(n){return u.find(n,fe)},me=function(n){return(function(n){if(!u.every(n,I.isTextComponent)||!ce(n,ee))return!1;var e=u(["textColors","averageFontSize","fontNames"]).map((function(e){return u.isEqual(u.get(n,[0,"conversionData",e]),u.get(n,[1,"conversionData",e]))})).compact().size(),t=u.sumBy(n,"conversionData.textLength");return e<=1&&t<=re}(n)||function(n){var e=u.find(n,["conversionData.category","text"]),t=u.find(n,["conversionData.category","graphic"]);if(!e||!t)return!1;return ce(n,ee)&&e.conversionData.textLength<=re&&t.layout.width<=100}(n))&&ve(n)},pe=function(n){return u(n).sortBy("layout.x").map("id").value()},ve=function(n){return 2===u.size(n)&&n[0]&&n[1]&&I.getYOverlap(n[0],n[1])>0};function ye(n,e){u(e).map((function(n,t){return function(n,e,t){var o=[t[e-1],n],r=[n,t[e+1]];if(me(o)&&!me(r))return{groupComps:o,conversionData:ie.LOGO}}(n,t,e)})).compact().forEachRight((function(t){return he(n,e,t)}))}function he(n,e,t){var o=n.conversionData.componentsOrder.indexOf(t.groupComps[0].id),r=u.assign({},t.conversionData,{componentsOrder:pe(t.groupComps)}),i=U(n,t.groupComps,r,o);return n.conversionData.componentsOrder.splice(o,t.groupComps.length,i.id),e.splice(o,t.groupComps.length,i),i}function ge(n,e){var t=de(n);return ce(n,e)&&u.every(n,I.isTextComponent)&&se(t)}function Ce(n,e){var t=de(n),o=u.reject(n,t)[0];return ce(n,e)&&I.isTextComponent(o)&&le(t)}function be(n){if(!u.every(n,ae))return!1;var e,t,o,r=u.take(n,2),i=u.takeRight(n,2),a=(e=r,t=u.take(e,2),o=ue(t),{min:u.max([o-20,te.min]),max:u.min([o+20,te.max])});return(Ce(r,te)&&Ce(i,a)||ge(r,te)&&ge(i,a))&&ve(r)&&ve(i)}function De(n){var e={foundLists:[],curChunk:[]};return u.forEach(n,(function(n){e.curChunk.push(n);var t,o,r,i=u.last(e.foundLists);return i&&2===u.size(e.curChunk)&&(t=i,o=e.curChunk,r=u.take(t,2),be(ne(r,o)))?(i.splice.apply(i,ne([i.length,0],e.curChunk)),u.assign(e,{curChunk:[]})):u.size(e.curChunk)<4?void 0:be(e.curChunk)?(e.foundLists.push(e.curChunk),u.assign(e,{curChunk:[]})):u.assign(e,{curChunk:u.tail(e.curChunk)})})),u.flatMap(e.foundLists,(function(n){return function(n){return u(n).map((function(e,t){return t%2?{conversionData:ie.ROW,groupComps:[n[t-1],e]}:null})).compact().value()}(n)}))}var Te=function(n,e){return!n.conversionData.isTightContainer||2!==e.length||I.shouldStretchToScreenWidth(n)||!ce(e,te)||(t=e,!u.find(t,["conversionData.inlineWhenGrouped",!0]));var t};function Oe(n){if(!Object(Dn.g)(n)){var e=Object(Dn.d)(n);u.size(e)&&(!function(n,e){Te(n,e)||u.assign(n.conversionData,ie.ROW,{componentsOrder:pe(e)})}(n,e),function(n,e){var t=De(e);u.forEachRight(t,(function(t){return he(n,e,t)}))}(n,e),ye(n,e))}}function Me(n){if(!Object(Dn.f)(n)){Oe(n);var e=Object(Dn.d)(n);u.forEach(e,Me)}}function Ee(n,e){var t,o=I.getChildren(n);if(o){var r=u.map(o,"id"),i=null===(t=n.conversionData.mobileHints)||void 0===t?void 0:t.recommendedComponentsOrder;if(i){var a=u.intersection(i,r);u.set(n,["conversionData","componentsOrder"],a)}else Object(Dn.g)(n)?u.set(n,["conversionData","componentsOrder"],r):(Object(v.c)(n,o,e),e.detectSemanticGroups&&e.useOverlapRules&&function(n){Zn(n,Object(Dn.d)(n)),Jn(n,Object(Dn.d)(n))}(n)),Tn(n,Object(Dn.d)(n));u.forEach(Object(Dn.d)(n),(function(n){return Ee(n,e)}))}}function Se(n,e){u.defaults(n,{conversionData:{}});var t=I.getChildren(n);t&&(e.detectSemanticGroups&&(z=1e3,e.useOverlapRules||En(n,t)),Ee(n,e),e.applySemanticRules&&Me(n),function n(e,t){void 0===t&&(t=p.a.MOBILE_WIDTH);var o=t-2*p.a.SECTION_MOBILE_MARGIN_Y;u.forEach(e,(function(e){"appWidget"===e.conversionData.category&&(u.assign(e.conversionData,u.pick(u.get(e,["components",0,"conversionData"],{}),"fixedSize")),u.assign(e.conversionData.mobileHints,u.pick(u.get(e,["components",0,"conversionData","mobileHints"],{}),["recommendedWidth","recommendedHeight"]))),Dn.f(e)||("boxContainer"===e.conversionData.category&&e.layout.width<=o?u.assign(e.conversionData,{rescaleMethod:"none",fixedSize:{width:e.layout.width}}):"boxContainer"===e.conversionData.category&&!e.conversionData.rescaleMethod&&e.layout.width<=400?u.assign(e.conversionData,{rescaleMethod:"proportional"}):n(I.getChildren(e),I.shouldStretchToScreenWidth(e)?t:o))}))}(t),nn(n,!e.keepNotRecommendedMobileComponents))}var xe=function(){return(xe=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)},we=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},Pe=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(we(arguments[e]));return n},Ie=function(n,e){n.layout.height=e},Ne=function(n,e,t){return"leftTop"===u.get(t,["conversionData","mobileHints","offsetOrigin"])?u.get(t.conversionData,["mobileHints","offsetY"],0):n.conversionData.hasTightYMargin||!t?0:t.conversionData.isTransparentContainer?Ne(n,e,u.head(t.components)):I.shouldStretchToScreenWidth(t)&&!t.layout.y?0:(e.conversionData.borderWidth||0)+(I.shouldStretchToScreenWidth(e)?p.a.SECTION_MOBILE_MARGIN_Y:p.a.COMPONENT_MOBILE_MARGIN_Y)},_e=function(n){return u.sortBy(n.components,(function(e){return(n.conversionData.componentsOrder||[]).indexOf(e.id)}))},Ae=function(n,e){var t=_e(n),o=e.get(n.id);if(o){var r=function(n,e,t){var o=I.componentListToMap(n),r=I.getChildren(e);if(r){var i=I.componentListToMap(r);return t.forEach((function(n){var e=i.get(n.id);if(e){var t=o.get(n.id);e.conversionData=xe(xe({},t?t.conversionData:{}),e.conversionData),o.set(e.id,e)}})),Pe(o.values())}}(t,o,e);u.assign(n,o,{conversionData:n.conversionData,components:r})}},ke=function(n){return u.maxBy(n,"conversionData.textLength")},Re=function(n){return n.layout.x+n.layout.width};function Be(n,e){var t=_e(n);if(u(t).filter(I.isTextComponent).forEach((function(n){return Ge(n,1)})),e>=1)!function(n,e){var t=ke(e),o=e[0],r=e[1],i=r?Re(r):0,a=n.layout.width-i;t.layout.width+=a,o===t&&r&&(r.layout.x+=a)}(n,t);else{var o=ke(t),r=t.indexOf(o)?0:1,i=t[r];if(i){var a=Object(I.isGraphicComponent)(i)?40:i.layout.width;if(i.layout.width*e>=a)return Fe(i,e),void Fe(o,e);var c=-Object(I.getXOverlap)(i,o),s=i.layout.width<a?i.layout.width:a,l=s/i.layout.width,f=(n.layout.width-s-c)/(Re(t[1])-i.layout.width-c),d=["width","height"];Fe(i,l,d),Fe(o,f,d),t[1].layout.x=Re(t[0])+c}}}function Fe(n,e,t){void 0===t&&(t=["x","y","width","height"]),1!==e&&u.assign(n.layout,u.zipObject(t,u.map(t,(function(t){return Math.round(n.layout[t]*e)}))))}var Le=function(n,e){Fe(n,e),u.forEach(n.components,(function(n){return Le(n,e)})),Ge(n,e)},Ge=function(n,e){if(I.isTextComponent(n)){var t=n.conversionData.averageFontSize||0;n.layout.scale=t*e*.96/n.conversionData.mobileAdjustedAverageFontSize}},je=function(n,e,t,o,r){u.has(n,["conversionData","preset"])&&u.get(n,["conversionData","shouldApplyPreset"])?function n(e,t){return u.assign(e,u.omit(t,["conversionData","components"])),e.components&&(e.components=u(t.components).map((function(t){var o=I.getComponentByIdFromStructure(t.id,e);return o?n(o,t):null})).compact().value()),e}(n,n.conversionData.preset):n.layout.width>e||n.conversionData.shouldEnlargeToFitWidth||n.layout.width>p.a.MIN_WIDTH_FOR_ENLARGE||t||"row"===n.conversionData.rescaleMethod?We(n,e,o,r):ze(n,{scaleFactor:1},r)},He=function(n,e,t,o,r){var i;void 0===o&&(o={imageScaleFactor:1,applyFontScaling:!0,enableNewMergeFlow:!1}),void 0===r&&(r=new Map),o.enableNewMergeFlow&&Object(I.shouldKeepOnMobile)(n,r)?(Ae(n,r),i=I.getChildren(n)):i=_e(n);var a=e.conversionData.topRightMargin||[0,0],c=u.head(i),s=Ne(n,e,c),l=s;u.forEach(i,(function(c,f){var d=function(n,e){if("leftTop"===u.get(n.conversionData,["mobileHints","offsetOrigin"]))return u.get(n.conversionData,["mobileHints","offsetX"],0);if(e.conversionData.isTransparentContainer&&"column"!==e.conversionData.category)return 0;var t=e.conversionData.marginX;return u.isNumber(t)?t:(I.shouldStretchToScreenWidth(e)?p.a.SITE_SEGMENT_PADDING_X:p.a.COMPONENT_MOBILE_MARGIN_X)+u.get(e.conversionData,"borderWidth",0)}(c,e),m=!1;o.enableNewMergeFlow&&(m=Object(I.shouldKeepOnMobile)(c,r)),(o.applyFontScaling&&I.isTextComponent(c)||c.conversionData.mobileScale)&&(m||(c.layout.scale=c.conversionData.mobileScale));var v=I.shouldStretchToScreenWidth(c),y=d,h=d,g=c.conversionData.isInvisible||v?"screen":n.conversionData.naturalAlignment||"center";l<a[1]-s&&(h=Math.max(h,a[0]),"center"===g&&(y=h));var C,b,D,T=t-y-h,O=function(n,e,t,o,r){var i=u.get(n.conversionData,["mobileHints","recommendedWidth"]);if(i)return i;var a=u.get(n.conversionData.fixedSize,"width");return I.isGraphicComponent(n)&&a?a:o?e:I.isImageComponent(n)&&1!==r.imageScaleFactor?Math.min(t,Math.round(n.layout.width*r.imageScaleFactor)):a?Math.min(e,+a):null}(c,t,T,v,o),M=u.isNumber(O);if(je(c,M?O:T,M,o,r),l<a[1]&&O>T&&!c.conversionData.isTransparentContainer&&(l=a[1],h=y=d),u.isNumber(c.conversionData.yOffset)?l-=c.conversionData.yOffset:c.conversionData.yOffsetRatio&&(l-=c.layout.height*c.conversionData.yOffsetRatio),!m){c.layout.x=function(n,e,t,o,r,i){return"leftTop"===u.get(n,["conversionData","mobileHints","offsetOrigin"])?u.get(i,["layout","x"],0)+u.get(n.conversionData,["mobileHints","offsetX"],0):i&&"rightTop"===u.get(n,["conversionData","mobileHints","offsetOrigin"])?i.layout.x+i.layout.width+u.get(n.conversionData,["mobileHints","offsetX"],0):i&&"leftBottom"===u.get(n,["conversionData","mobileHints","offsetOrigin"])?i.layout.x+u.get(n.conversionData,["mobileHints","offsetX"],0):"screen"===e?0:"left"===e?r:"right"===e?t-n.layout.width-o:Math.round((t-n.layout.width)/2)}(c,g,t,h,y,i[f-1]);var E=c.conversionData.isInvisible&&!f;c.layout.y=l-(E?s+1:0),c.conversionData.stackLayout||(l+=c.conversionData.isInvisible?1:c.layout.height+(C=c,b=i[f+1],"leftBottom"===u.get(b,["conversionData","mobileHints","offsetOrigin"])?u.get(b.conversionData,["mobileHints","offsetY"],0):C&&"rightTop"===u.get(b,["conversionData","mobileHints","offsetOrigin"])||C&&"leftTop"===u.get(b,["conversionData","mobileHints","offsetOrigin"])?u.get(b.conversionData,["mobileHints","offsetY"],0)-C.layout.height:!b||(null===(D=b.conversionData)||void 0===D?void 0:D.tightWithPreviousSibling)?0:I.isTextComponent(C)&&!I.isTextComponent(b)?p.a.MARGIN_BETWEEN_TEXT_AND_NON_TEXT:p.a.COMPONENT_MOBILE_MARGIN_Y))}}))},ze=function(n,e,t){if(!function(n,e){return Object(I.isModifiedComponent)(n)&&!n.conversionData.isDirectParentOfMobileOnly||e.has(n.id)&&!n.conversionData.isDirectParentOfMobileOnly}(n,t)){var o=u.get(n.conversionData,["mobileHints","recommendedHeight"]);if(o)return Ie(n,o);var r=u.get(n.conversionData.fixedSize,"height");if(I.isGraphicComponent(n)&&r)return Ie(n,r);if(I.isTextComponent(n)&&!I.isVerticalText(n))return Ie(n,p.a.DEFAULT_TEXT_HEIGHT);var i=n.layout.height,a=n.conversionData.minHeight||0;u.isNumber(r)?Ie(n,r):u.get(n.conversionData,"preserveAspectRatio",!0)?Ie(n,Math.round(n.layout.height*e.scaleFactor)):a&&Ie(n,0),Ie(n,a<i?Math.max(n.layout.height,a):i);var c=I.getHeightAccordingToChildren(n,u.reject(n.components,"conversionData.isInvisible"),!1);c&&(!r||r<=c||I.containsComponent(n,I.isTextComponent))&&Ie(n,c)}},We=function(n,e,t,o){void 0===t&&(t={imageScaleFactor:1,applyFontScaling:!0}),void 0===o&&(o=new Map);var r,i,a=(i=e,(r=n).layout.width>0?i/r.layout.width:1),c=n.conversionData.rescaleMethod;"none"===c||Object(I.shouldKeepOnMobile)(n,o)||(n.layout.width=e);var s=u.assign(t,{imageScaleFactor:n.conversionData.descendantImageScaleFactor||t.imageScaleFactor});switch(c){case"proportional":u.forEach(n.components,(function(n){return Le(n,a)}));break;case"logo":!function(n,e){u.forEach(n.components,(function(n){return Le(n,u.min([e,1]))}))}(n,a);break;case"row":Be(n,a);break;case"none":break;default:He(n,n,e,s,o)}ze(n,{scaleFactor:a},o)},Ue=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},Ye=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Ue(arguments[e]));return n},Xe=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ve=function(n,e){var t=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow","platform.components.AppWidget"];u.forEach(I.getChildren(n),(function(n){if(u.includes(t,n.componentType)){if(!n.components||0===n.components.length)return;var o=I.getComponentByIdFromStructure(n.id,e),r=u.maxBy(n.components,"layout.height").layout.height;u.forEach(n.components,(function(n){return u.assign(n.layout,{x:0,y:0,height:r})})),n.layout.height=r,Object(j.a)(n)||(n.components=u.sortBy(n.components,(function(n){return u.findIndex(o.components,{id:n.id})})))}Ve(n,e)}))};function qe(n,e){u.forEach(n,(function(n){var e=u.head(n.componentToAdd);I.isRescaleVirtualGroup(e)&&(I.translateComps(e.components,e.layout.x,e.layout.y),n.componentToAdd=e.components),H(e,e.components)})),u.forEach(n,(function(n){u.remove(n.componentToAdd,(function(n){return!u.includes(e,n.id)}))}))}function Ke(n){var e={layout:I.getSnugLayout(n),conversionData:{rescaleMethod:"default",hasTightYMargin:!0,isTightContainer:!0},componentType:p.a.VIRTUAL_GROUP_TYPES.MERGE,components:n},t=W(e);return I.translateComps(n,-e.layout.x,-e.layout.y),t}function Qe(n,e){return void 0===e&&(e=[]),e.push(n.id),u.forEach(I.getChildren(n),(function(n){e=e.concat(Qe(n))})),e}function Ze(n,e,t){u.defaults(n.conversionData,{blocks:[],blockLayout:[]});var o=I.getChildren(n);o||(o=n.components=[]);var r=function(n,e){var t=u.get(e,["conversionData","blocks"],[]);return u.findIndex(t,(function(e){return u.includes(e,n)}))}(t,n),i=$.objectUtils.cloneDeep(e);i.layout.y=function(n,e,t){var o=u.get(e,["conversionData","blockLayout"]),r=u.get(e,["conversionData","hasTightMarginBetweenChildren"],!1);if(n>=0){var i=r?0:p.a.COMPONENT_MOBILE_MARGIN_Y;return o[n].y+o[n].height+i}if(!I.shouldStretchToScreenWidth(t))return p.a.COMPONENT_MOBILE_MARGIN_Y;return e.layout.y?p.a.SECTION_MOBILE_MARGIN_Y:0}(r,n,e),o.push(i);var a=u.get(n,["conversionData","blockLayout",r+1,"y"]);u.isNumber(a)&&$e(n,r,i.layout.y+i.layout.height+p.a.COMPONENT_MOBILE_MARGIN_Y-a);n.conversionData.blocks.splice(r+1,0,[i.id]),n.conversionData.blockLayout.splice(r+1,0,i.layout)}function Je(n){var e=I.getChildren(n);if(!I.isMasterPage(n)&&!u.isEmpty(e)){var t=u.reduce(e,(function(n,e){return Math.max(n,e.layout.y+e.layout.height)}),0),o=u.get(n,["conversionData","hasTightYMargin"],!1),r=I.isPageComponent(n)||o?0:p.a.COMPONENT_MOBILE_MARGIN_Y;n.layout.height=Math.max(n.layout.height,t+r)}}function $e(n,e,t){var o,r,i,a=I.getChildren(n);for(r=e+1;r<u.get(n,["conversionData","blocks","length"],0);r++){for(i=n.conversionData.blocks[r],o=0;o<i.length;o++)u.find(a,{id:i[o]}).layout.y+=t;n.conversionData.blockLayout[r].y+=t}if(e>-1)for(i=u.get(n,["conversionData","blocks",e]),o=0;o<i.length;o++)u.find(a,{id:i[o]})}function nt(n,e,t){if(I.isMasterPage(n)){var o=I.getChildren(n);V(o),t.reparentMobileSOAP&&function(n,e){var t=q(n,{}),o=u.remove(e,(function(n){return!Object(j.b)(n)&&t[n.id]&&!I.isAllowedToBeInMasterPage(t[n.id])}));u.forEach(o,(function(n){var e=u.get(t,[n.id,"conversionData"]);u.set(e,"fixedSize",{width:n.layout.width,height:n.layout.height}),u.set(e,["mobileHints","propertyQuery"],n.propertyQuery)}))}(o,I.getChildren(e))}var r=I.getAllCompsInStructure(n,!1,u.negate(I.isDesktopOnlyComponent)),i=I.getAllCompsInStructure(e);!function n(e,t){var o=I.getComponentByIdFromStructure(t.id,e);if(!o)return;var r=o.conversionData;r&&(t.conversionData=t.conversionData||{},t.conversionData.hasTightYMargin=!0===r.isTightContainer,t.conversionData.hasTightMarginBetweenChildren=!0===r.hasTightMarginBetweenChildren);u.forEach(I.getChildren(t),(function(t){return n(e,t)}))}(n,e),function n(e,t){var o=I.getComponentByIdFromStructure(t.id,e),r=u.get(o,"styleId");r&&u.set(t,"styleId",r);u.forEach(I.getChildren(t),n.bind(null,e))}(n,e),function n(e,t,o){e.conversionData||(e.conversionData={}),e.conversionData.existsBeforeMerge=!0,o&&I.setParentIdToMobileHints(e,o),t[e.id]&&(t[e.id].conversionData.existsBeforeMerge=!0);var r=I.getChildren(e);r&&r.length>0&&r.forEach((function(o){return n(o,t,e.id)}))}(e,r);var a,c,s,l,f,d,m,v,y,h,g,C,b=t.enableNewMergeFlow?bn(r,i):(c=i,s=yn(a=r),l=vn(a,s),f=sn(s,l),d=gn(c),m=d.mobileComponentIds,v=d.mobileOnlyComponentIds,y=u.intersection(m,f),h=u.map(a,"id"),g=u.difference(m,h),C=fn(a,c),{idsOfComponentsToDelete:u.pullAllBy(u.uniq(sn(C,g,y)),v),idsOfComponentsToAdd:u.pullAllBy(u.difference(dn(a,c),f),v)||[]});if(b.idsOfComponentsToDelete.length>0||b.idsOfComponentsToAdd.length>0){if(t.enableNewMergeFlow)b.idsOfComponentsToAdd=t.keepNotRecommendedMobileComponents?b.idsOfComponentsToAdd:et(b.idsOfComponentsToAdd,r),function(n,e,t,o){var r=n.idsOfMobileModifiedComponents,i=n.idsOfComponentsToDelete,a=n.idsOfComponentsToAdd,c=n.idsOfMobileOnlyComponents,s=n.idsOfNotExistingBeforeMergeComponents;ct(e),function(n,e){var t=I.getAllCompsInStructure(e);n.forEach((function(n){var e=t[n];I.isModifiedComponent(e)&&(delete e.conversionData.mobileHints.modifiedByUser,e.conversionData.mobileHints.author="studio")}))}(s,t);var l=function(n){var e=n.mobileStructure,t=n.desktopStructure,o=n.idsOfMobileOnlyComponents,r=n.idsOfMobileModifiedComponents,i=I.getAllCompsInStructure(e),a=I.getAllCompsInStructure(t),c=function(n,e,t){var o=n.reduce((function(n,o){var r=I.getParent(o,e);if(r){if(I.isMasterPage(r))return n;var i=t[r.id];return i?(i.conversionData.isDirectParentOfMobileOnly=!0,n.add(i.id),n):n}}),new Set);return sn(o)}(o,e,a);return u.uniq(Ye(r,o,c)).reduce((function(n,e){return n.set(e,i[e]),n}),new Map)}({mobileStructure:e,desktopStructure:t,idsOfMobileOnlyComponents:c,idsOfMobileModifiedComponents:r});ot(e,i,a,r),function(n,e,t,o,r){var i=$.objectUtils.cloneDeep(e);X(i,I.getChildren(i),r);var a=ut(o,i);if(Se(i,r),!u.isEmpty(o)){var c=at(i,i,n,a);qe(c,o),function(n,e,t){for(var o={imageScaleFactor:1,applyFontScaling:e.applyFontScaling,enableNewMergeFlow:e.enableNewMergeFlow},r=0;r<n.length;r++){var i=n[r],a=i.componentToAdd,u=i.futureMobileContainerOfAddedComponent,c=i.previousComponentIdThatAlsoExistInMobile,s=Ke(a);X(s,s.components,e),Se(s,e),s.layout.x=0,s.layout.width=I.isPageComponent(u)||I.isScreenWidthComponent(u)||I.isMasterPage(u)?p.a.MOBILE_WIDTH:u.layout.width,He(s,u,s.layout.width,o,t),ze(s,{scaleFactor:1},t),Ze(u,s,c),Je(u);var l=I.getChildren(u);rn(u,l),ct(u)}}(it(c),r,t)}}(e,t,l,a,o),tt(e)}(b,e,n,t);else{var D=t.keepNotRecommendedMobileComponents?b.idsOfComponentsToAdd:et(b.idsOfComponentsToAdd,r);!function(n,e,t,o,r){ct(n),ot(n,e,o),function(n,e,t,o){var r,i,a=$.objectUtils.cloneDeep(e);X(a,I.getChildren(a),o);var c=function(n,e,t){var o,r,i=[];for(o=n.length-1;o>=0;o--){var a=n[o],c=I.getComponentByIdFromStructure(a,e);if(I.isGroupComponent(c)){var s=u.partition(c.components,(function(e){return u.includes(n,e.id)})),l=u(s[1]).map((function(n){return I.getComponentByIdFromStructure(n.id,t)})).compact().value(),f=!0;for(r=1;r<l.length;r++){var d=I.getParent(l[r-1].id,t),m=I.getParent(l[r].id,t);d.id!==m.id&&(f=!1)}if(!f){n.splice(o,1);continue}if(0===l.length)continue;var p=u.clone(c);p.components=[],p.layout=I.getSnugLayout(l);var v=I.getParent(l[0].id,t);for(I.addComponentsTo(v,[p]),r=0;r<l.length;r++){var y=l[r];I.reparentComponent(p,y),u.remove(I.getChildren(v),y)}i.push(n[o]),n.splice(o,1)}}return i}(t,a,n);u.isEmpty(c)||ct(n);var s=ut(t,a);Se(a,o),u.isEmpty(t)||(qe(r=at(a,a,n,s),t),i=it(r),function(n,e,t){var o=function(n,e){var t,o,r,i,a,c=[];for(t=0;t<n.length;t++)for(r=n[t].componentToAdd,o=0;o<r.length;o++)i=r[o],a=u.difference(Qe(i),e),c=c.concat(a);return c}(e,t);ot(n,o)}(n,i,t),function(n,e,t){var o,r,i,a,u,c={imageScaleFactor:1,applyFontScaling:t.applyFontScaling,enableNewMergeFlow:t.enableNewMergeFlow};for(o=0;o<n.length;o++){r=n[o].componentToAdd,i=n[o].futureMobileContainerOfAddedComponent,a=n[o].previousComponentIdThatAlsoExistInMobile,X(u=Ke(r),u.components,t),Se(u,t),u.layout.x=0,u.layout.width=I.isPageComponent(i)||I.isScreenWidthComponent(i)||I.isMasterPage(i)?p.a.MOBILE_WIDTH:i.layout.width,He(u,i,u.layout.width,c),ze(u,{scaleFactor:1},new Map),Ze(i,u,a),Je(i);var s=i.components||i.children;rn(i,s),ct(i)}}(i,0,o));[].splice.apply(t,[t.length,0].concat(c))}(n,r,o,t),tt(n)}(e,b.idsOfComponentsToDelete,t,D,n)}Ve(e,n)}}function et(n,e){var t=u.reduce(e,(function(n,e){var t=I.isFixedPositionElement(e),o=I.shouldConvertFixedPositionToAbsolute(e),r=t&&!o,i=!I.isFixedPositionAllowed(e);return r&&i?u.concat(n,u.keys(I.getAllCompsInStructure(e))):n}),[]);return u.difference(n,t)}function tt(n){(I.isContainerComponent(n)||I.isPageComponent(n))&&I.ensureContainerTightlyWrapsChildren(n,I.getChildren(n),!0)}var ot=function(n,e,t,o){void 0===t&&(t=[]);var r=I.getChildren(n);if(r){rt(e,n,r);var i=u.map(r,"id"),a=u.intersection(e,i),c=I.getComponentsByIds(n,a);if(function(n,e,t){u(n).filter((function(n){return I.isContainerComponent(n)||I.isPageComponent(n)})).forEach((function(n){u(n.components).map("id").filter((function(n){return!u.includes(t,n)})).forEach((function(n){e.push(n)}))}))}(c,t,e),c.length>0){var s=c.map((function(n){return n.id})).indexOf(function(n){var e,t,o,r,i=I.getChildren(n);if(i){for(o=-Number.MAX_VALUE,e=0;e<i.length;e++)(r=i[e]).layout.y+r.layout.height>o&&(t=r,o=r.layout.y+r.layout.height);return t}}(n).id)>-1;if(o&&o.length,I.removeChildrenFrom(n,c),function(n,e){var t=u.get(n,["conversionData","blocks"],[]),o=u.transform(t,(function(t,o,r){var i=o.length;n.conversionData.blocks[r]=u.difference(o,e),i!==n.conversionData.blocks[r].length&&t.push(r)}),[]);u.forEachRight(t,(function(e,t){if(u.includes(o,t))u.isEmpty(n.conversionData.blocks[t])&&($e(r=n,i=t,-(r.conversionData.blockLayout[i].height+p.a.COMPONENT_MOBILE_MARGIN_Y)),n.conversionData.blocks.splice(t,1),n.conversionData.blockLayout.splice(t,1));else{var r,i,a=n.conversionData.blockLayout[t],c=I.getComponentsByIds(n,n.conversionData.blocks[t]),s=I.getSnugLayout(c);n.conversionData.blockLayout[t]=s;var l=s.y-a.y;0!==l&&$e(n,t-1,-l);var f=a.height-n.conversionData.blockLayout[t].height;0!==f&&$e(n,t,-(f-l))}}))}(n,a),s){I.ensureContainerTightlyWrapsChildren(n,r,!0,50)}}u.forEach(r,(function(n){ot(n,e,t)}))}},rt=function(n,e,t){var o=u.map(t,"id");u.forEachRight(n,(function(n){if(!u.includes(o,n)){var t=I.getComponentsByIds(e,[n])[0];I.isGroupComponent(t)&&(I.removeGroup(t,e),ct(e))}}))};function it(n){var e,t,o=[];return u.forEach(n,(function(n){for(t=!1,e=0;e<o.length;e++)if(n.futureMobileContainerOfAddedComponent===o[e].futureMobileContainerOfAddedComponent&&n.previousComponentIdThatAlsoExistInMobile===o[e].previousComponentIdThatAlsoExistInMobile){o[e].componentToAdd=Ye(o[e].componentToAdd,n.componentToAdd),t=!0;break}t||o.push(n)})),o}var at=function(n,e,t,o){var r=I.getChildren(n),i=[];if(r){for(var a=o.map((function(n){return n.id})),u=0;u<r.length;u++){var c=r[u],s=c.id,l=!1,f=void 0;if(a.indexOf(s)>=0){l=!0,f=-1;for(var d=0;d<o.length;d++)if(o[d].id===s){f=d;break}o.splice(f,1)}if(I.isVirtualGroup(c))for(d=0;d<c.components.length;d++)if(a.indexOf(c.components[d].id)>-1){l=!0,f=-1;for(var m=0;m<o.length;m++)if(o[m].id===c.components[d].id){f=m;break}o.splice(f,1)}if(l){var p=c,v=pt(n,e,s,t),y=v?I.getParent(v,t):mt(c,e,t);i.push({componentToAdd:[p],futureMobileContainerOfAddedComponent:y,previousComponentIdThatAlsoExistInMobile:v})}}for(u=0;u<r.length;u++){var h=at(r[u],e,t,o);i=Ye(i,h)}}return i},ut=function(n,e){var t,o=[],r=n.map((function(n){return I.getComponentByIdFromStructure(n,e)}));return r=u.without(r,null),u.isEmpty(r)||(t=r.map((function(n){var e=$.objectUtils.cloneDeep(n);return function(n){if(!I.getChildren(n))return;n.components=[],u.assign(n.conversionData,{blocks:[],blockLayout:[],componentsOrder:[]})}(e),e})),u.forEachRight(t,(function(n){for(var e,i,a=!1,c=t.length-1;c>=0;c--){var s=t[c],l=r[c];if(e=n,i=l,u.some(I.getChildren(i),{id:e.id})){a=!0,I.reparentComponent(s,n);break}}a||o.push(n)}))),o};function ct(n){u.has(n,"conversionData")||u.set(n,["conversionData"],{});var e=I.getChildren(n);if(e){n.conversionData.blocks=[],n.conversionData.blockLayout=[];var t=$.objectUtils.cloneDeep(e);t.sort(ft);var o=[],r=0;u.forEach(t,(function(e,i){if(o.push(e.id),i!==t.length-1){var a=u.slice(t,r,i+1);u.some(a,(function(n){return lt(n,t[i+1])}))||(st(n,o),o=[],r=i+1)}else st(n,o)})),u.forEach(e,(function(n){return ct(n)}))}}function st(n,e){var t=I.getComponentsByIds(n,e),o=I.getSnugLayout(t);n.conversionData.blockLayout.push(o),n.conversionData.blocks.push(e)}var lt=function(n,e){return I.getYOverlap(n,e)/Math.min(n.layout.height,e.layout.height)>.25};function ft(n,e){if(!lt(n,e)&&n.layout.y!==e.layout.y)return n.layout.y<e.layout.y?-1:1;var t=I.isScreenWidthComponent(n),o=I.isScreenWidthComponent(e);return t?o?0:-1:o?1:n.layout.x<e.layout.x?-1:n.layout.x>e.layout.x?1:0}function dt(n,e){if(u.get(e,["conversionData","nestOverlayingSiblings"],!0))return!0;var t=u.map(I.getChildren(e),"id");return u.includes(t,n)}function mt(n,e,t){for(var o,r,i=n.id,a=function n(e){var t,o,r={},i=I.getChildren(e);if(i)try{for(var a=Xe(i),c=a.next();!c.done;c=a.next()){var s=c.value;r[s.id]=e.id,r=u.merge(r,n(s))}}catch(n){t={error:n}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(t)throw t.error}}return r}(e),c=a[i];!o||!dt(n.id,r);){var s=(o=I.getComponentByIdFromStructure(c,t))?I.getChildren(o):[];if(r=I.getComponentByIdFromStructure(c,e),c=a[c],I.shouldReparentCompToChildOfContainer(n,r)&&!u.isEmpty(s))return u.head(s)}return o}function pt(n,e,t,o){if(I.isVirtualGroup(n))return pt(I.getParent(n.id,e),e,n.id,o);for(var r=u.get(n,["conversionData","componentsOrder"],[]),i=r.indexOf(t)-1;i>=0;i--){var a=r[i];if("PAGES_CONTAINER"!==a){var c=u.find(I.getChildren(n),{id:a});if(I.getComponentByIdFromStructure(a,o))return a;if(I.isVirtualGroup(c))for(var s=0;s<c.components.length;s++){var l=u.get(c,["conversionData","componentsOrder",s]);if(I.getComponentByIdFromStructure(l,o))return l}}}return null}var vt=function(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var o,r,i=t.call(n),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(n){r={error:n}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},yt=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(vt(arguments[e]));return n};function ht(n,e){return u(n).map((function(n){return I.getComponentByIdFromStructure(n,e)})).compact().value()}function gt(n,e){var t=ht(n,e),o=function(n){return u.map(n,(function(n){var e=$.objectUtils.cloneDeep(n);return I.getChildren(e)&&(e.components=[]),e}))}(t),r=[];return u.forEach(o,(function(n){for(var e=0;e<o.length;e++){var i=t[e];if(u.some(I.getChildren(i),{id:n.id})){var a=o[e];return void I.addComponentsTo(a,[n])}}r.push(n)})),r}function Ct(n,e,t,o){void 0===o&&(o={});var r=I.getChildren(n);return r?(u.forEach(r,(function(r){Ct(r,e,t,o);var i=u(t).remove({id:r.id}).head();if(!u.isEmpty(i)){var a=I.getComponentByIdFromStructure(n.id,e)||e;o[a.id]=o[a.id]||{componentsToAdd:[],parent:a},o[a.id].componentsToAdd.push(i)}})),o):o}function bt(n){return I.getAllCompsInStructure(n,!1,u.negate(j.b))}function Dt(n,e,t){var o=u.keys(t),r=u.difference(o,n),i=fn(e,t);return u.uniq(yt(r,i))}function Tt(n,e){if(!u.isEmpty(e)){var t=I.getChildren(n);if(t){var o=u.map(t,"id"),r=u.remove(e,(function(n){return u.includes(o,n)})),i=I.getComponentsByIds(n,r);i.length>0&&I.removeChildrenFrom(n,i),u.forEach(t,(function(n){return Tt(n,e)}))}}}function Ot(n,e){return u.some(Object(I.getChildren)(e),(function(e){return e.id===n}))}function Mt(n,e){return u.find(e,(function(e){return Ot(n,e)}))}function Et(n,e,t){if(!u.isEmpty(t)){var o=Ct(e,n,gt(t,e));u.forEach(o,(function(n){var e=$.objectUtils.cloneDeep(n.componentsToAdd),t=u.flatMap(e,(function(n){return u.values(I.getAllCompsInStructure(n))}));u.forEach(t,(function(n){return I.shouldStretchToScreenWidth(n)?u.set(n,["layout","width"],p.a.MOBILE_WIDTH):u.set(n,["layout","width"],u.min([n.layout.width,p.a.MOBILE_WIDTH]))})),I.addComponentsTo(n.parent,e)})),function(n,e,t){var o=I.getAllCompsInStructure(e),r=I.getAllCompsInStructure(t),i=u.filter(n,(function(n){return u.has(o,n)}));u.forEach(i,(function(n){var e=Mt(n,o),t=Mt(n,r);if(e.id===t.id){var i=Object(I.getChildren)(e),a=u.filter(Object(I.getChildren)(t),(function(n){return Ot(n.id,e)})),c=u.get(a,[u.findIndex(a,{id:n})+1,"id"],null);if(c){var s=u.remove(i,{id:n});i.splice(u.findIndex(i,{id:c}),0,u.head(s))}}}))}(t,n,e)}}function St(n,e){var t,o=function(n){return I.getAllCompsInStructure(n,!1,u.negate(I.isDesktopOnlyComponent))}(n);t=n,Y(o),Z(t,I.getChildren(t),!0),I.isMasterPage(t)&&V(I.getChildren(t));var r=u(o).reject(["conversionData.mobileHints.hidden",!0]).map("id").value();Tt(e,Dt(r,o,bt(e))),Tt(e,function(n,e){var t=ht(n,e);return u(t).flatMap((function(n){return u.values(I.getAllCompsInStructure(n))})).map("id").uniq().difference(n).value()}(u.difference(r,u.keys(bt(e))),n)),Et(e,n,u.difference(r,u.keys(bt(e))))}var xt=p.a.MOBILE_WIDTH,wt="SITE_HEADER",Pt="SUBHEADER",It="PAGES_CONTAINER",Nt="TINY_MENU",_t=[wt,Pt,It,"SITE_FOOTER"];function At(n){var e=0;u.forEach(_t,(function(t){var o=u.find(n,(function(n){return function(n){return u.get(n,["conversionData","siteSegmentRole"],"")}(n)===t}));o&&(u.assign(o.layout,{x:0,width:xt,y:e}),e+=o.layout.height)}))}function kt(n){!function(n){var e=u.findIndex(n,(function(n){return wt===u.get(n,["conversionData","siteSegmentRole"])})),t=u.findIndex(n,(function(n){return Pt===u.get(n,["conversionData","siteSegmentRole"])}));if(!(-1===e||-1===t||t===e+1)){var o=n.splice(t,1)[0];e=u.findIndex(n,(function(n){return wt===u.get(n,["conversionData","siteSegmentRole"])})),n.splice(e+1,0,o)}}(n),Rt(n)}function Rt(n){!function(n){var e=u.find(n,{id:It}),t=u.get(e,["components",0,"layout"]);u.assign(t,{width:xt,x:0})}(n),At(n)}function Bt(n){!function(n){u(n.children).filter(I.isSiteSegment).reject({id:It}).forEach((function(n){We(n,xt);Object(I.ensureContainerTightlyWrapsChildren)(n,n.components,!0)}))}(n),kt(Object(I.getChildren)(n)),function(n){G(n,Nt)}(n)}function Ft(n,e,t){if(pn(n,e),nt(n,e,t),"masterPage"===e.id){var o=I.getChildren(e),r=I.getChildren(n);u.forEach(o,(function(n){return u.set(n,"conversionData",u.get(u.find(r,{id:n.id}),"conversionData"))})),t.fixMasterPageStructureOrder?kt(o):Rt(o)}return un(e),I.getChildren(e)}function Lt(n,e,t){t.analyzeOnly||X(n,e,t),Se(n,t)}var Gt=function(){return(Gt=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}).apply(this,arguments)},jt=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(n){var e,t,o=Object(I.getFlattenListOfComponents)(n),r=[],i={};try{for(var a=jt(o),u=a.next();!u.done;u=a.next()){var c=u.value,s=c.id;if(i[s]){var l=Object(I.getParent)(s,n);r.push(Gt(Gt({},c),{parent:l.id}))}else i[s]=s}}catch(n){e={error:n}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},zt=function(n){return Ht(n).length>0},Wt={getFontSizeByFontName:function(n,e,t){if(void 0===t&&(t=c),0===e)return 0;var o,r,i,a,u,s,l,f,m=t[n];return m?(o=m.referencePoints,r=d,a=(i=e)<o[1]?o[0]:o[1],u=i<o[1]?r[0]:r[1],s=i<o[1]?o[1]:o[2],l=i<o[1]?r[1]:r[2],i*(f=(u-l)/(a-s))+(l-s*f)):e},convertFontSizeByTextLength:function(n,e){var t=f,o=s,r=l,i=Math.round(m(n,o.min,o.max))-o.min,a=Math.round(m(e,r.min,r.max))-r.min;return u.get(t,[i,a])}},Ut={getComponentIdsAddedToDesktopStructure:dn},Yt={isMobileOnlyComponentId:j.c,addComponent:G,getAdditionalStyles:function(){return k()}},Xt={inspectStructure:Lt,synchronizePages:function(n,e){return mn(n,e),u.mapValues(n,(function(n,t){return function(n,e){if(St(n,e),pn(n,e),"masterPage"===e.id){var t=I.getChildren(e),o=I.getChildren(n);u.forEach(t,(function(n){return u.set(n,"conversionData",u.get(u.find(o,{id:n.id}),"conversionData"))})),Rt(t)}return un(e),I.getChildren(e)}(n,e[t])}))},mergeDesktopPagesWithMobile:function(n,e,t){return mn(n,e),u.mapValues(n,(function(n,o){return Ft(n,e[o],t)}))},mergeDesktopStructureWithMobile:Ft,convertDesktopPageToMobile:function(n,e,t){return Lt(n,e,t),I.isMasterPage(n)?Bt(n):We(n,p.a.MOBILE_WIDTH),rn(n,e),un(n),I.getChildren(n)}}}])}));
//# sourceMappingURL=mobileCore.min.js.map